"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{294:(e,a,t)=>{t.d(a,{A:()=>i});var o=t(5155),n=t(2115);let r={en_proceso:"bg-yellow-100 text-yellow-700",planificada:"bg-blue-100 text-blue-700",finalizada:"bg-green-100 text-green-700",pendiente:"bg-gray-100 text-gray-700"},d=[{value:"id_orden_produccion",label:"ID Orden"},{value:"id_pedido",label:"ID Pedido"},{value:"id_cliente",label:"ID Cliente"},{value:"id_producto",label:"ID Producto"},{value:"fecha_creacion_orden_venta",label:"Fecha Creaci\xf3n"},{value:"fechaentrega_orden_venta",label:"Fecha Entrega"},{value:"estado_orden_produccion",label:"Estado"}];function i(e){let{ordenes:a}=e,[t,i]=(0,n.useState)("fecha_creacion_orden_venta"),[s,c]=(0,n.useState)(!1),[l,m]=(0,n.useState)(null),[p,u]=(0,n.useState)(""),[_,x]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),b=(0,n.useMemo)(()=>{let e=[...a];return p&&(e=e.filter(e=>e.estado_orden_produccion===p)),_&&(e=e.filter(e=>"".concat(e.nombre_cliente," ").concat(e.apellido_cliente)===_)),h&&(e=e.filter(e=>e.nombre_producto.toLowerCase().includes(h.toLowerCase()))),e.sort((e,a)=>{let o=e[t],n=a[t];return(("id_orden_produccion"===t||"id_pedido"===t||"id_cliente"===t||"id_producto"===t)&&(o=Number(o),n=Number(n)),("fecha_creacion_orden_venta"===t||"fechaentrega_orden_venta"===t)&&(o=new Date(o).getTime(),n=new Date(n).getTime()),"number"==typeof o&&"number"==typeof n)?s?o-n:n-o:s?String(o).localeCompare(String(n)):String(n).localeCompare(String(o))}),e},[a,t,s,p,_,h]),g=(0,n.useMemo)(()=>[...new Set(a.map(e=>e.estado_orden_produccion))],[a]),j=(0,n.useMemo)(()=>[...new Set(a.map(e=>"".concat(e.nombre_cliente," ").concat(e.apellido_cliente)))],[a]);return(0,o.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-primary",children:"\xd3rdenes de Producci\xf3n"}),(0,o.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-4",children:(0,o.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("label",{htmlFor:"filtro-estado",className:"text-sm font-medium",children:"Estado:"}),(0,o.jsxs)("select",{id:"filtro-estado",value:p,onChange:e=>u(e.target.value),className:"border rounded px-2 py-1 text-sm",children:[(0,o.jsx)("option",{value:"",children:"Todos"}),g.map(e=>(0,o.jsx)("option",{value:e,children:e.replace("_"," ")},e))]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("label",{htmlFor:"filtro-cliente",className:"text-sm font-medium",children:"Cliente:"}),(0,o.jsxs)("select",{id:"filtro-cliente",value:_,onChange:e=>x(e.target.value),className:"border rounded px-2 py-1 text-sm",children:[(0,o.jsx)("option",{value:"",children:"Todos"}),j.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("label",{htmlFor:"filtro-producto",className:"text-sm font-medium",children:"Producto:"}),(0,o.jsx)("input",{type:"text",id:"filtro-producto",value:h,onChange:e=>f(e.target.value),className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar por producto..."})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("label",{htmlFor:"ordenar",className:"text-sm font-medium",children:"Ordenar por:"}),(0,o.jsx)("select",{id:"ordenar",value:t,onChange:e=>i(e.target.value),className:"border rounded px-2 py-1 text-sm",children:d.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)("button",{className:"ml-2 px-2 py-1 rounded bg-neutral-light text-xs",onClick:()=>c(e=>!e),title:"Invertir orden",children:s?"Ascendente ↑":"Descendente ↓"})]})]})}),(0,o.jsx)("div",{className:" mt-6 min-w-full  ",children:b.map(e=>(0,o.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsxs)("span",{className:"font-bold text-primary",children:["Orden #",e.id_orden_produccion]}),(0,o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(r[e.estado_orden_produccion]||"bg-gray-200 text-gray-700"),children:e.estado_orden_produccion.replace("_"," ")})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsxs)("span",{className:"font-semibold mb-1 text-sm",children:["Pedido: ",e.id_orden_venta]}),(0,o.jsxs)("span",{className:"font-semibold mb-1 text-sm",children:["Cliente: ",e.nombre_cliente," ",e.apellido_cliente,"    "]})]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Producto:"})," ",e.nombre_producto," "]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Cantidad:"})," ",e.cantidad_producto]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Fecha creaci\xf3n de orden de producci\xf3n:"})," ",e.fecha_creacion_orden_produccion&&new Date(e.fecha_creacion_orden_produccion).getTime()>0?new Date(e.fecha_creacion_orden_produccion).toLocaleDateString():"-"]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Fecha fin de orden de producci\xf3n:"})," ",e.fecha_fin_orden_produccion&&new Date(e.fecha_fin_orden_produccion).getTime()>0?new Date(e.fecha_fin_orden_produccion).toLocaleDateString():"-"]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Fecha entrega del pedido:"})," ",e.fecha_entrega_solicitada_orden_venta&&new Date(e.fecha_entrega_solicitada_orden_venta).getTime()>0?new Date(e.fecha_entrega_solicitada_orden_venta).toLocaleDateString():"-"]}),(0,o.jsx)("div",{className:"flex gap-2 mt-2",children:(0,o.jsx)("button",{className:"flex-1 bg-blue-500 text-white rounded px-2 py-1 text-xs",onClick:()=>m(l===e.id_orden_produccion?null:e.id_orden_produccion),children:l===e.id_orden_produccion?"Ocultar materia prima":"Ver materia prima"})}),e.materias_primas_requeridas.length>0&&l===e.id_orden_produccion&&(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Materias primas utilizadas:"}),(0,o.jsx)("ul",{className:"list-disc list-inside text-sm mt-1",children:e.materias_primas_requeridas.map(e=>(0,o.jsxs)("li",{children:[e.nombre_materia_prima," - ",e.cantidad_materia_prima," ",e.unidad_medida_materia_prima," (Lote: ",e.codigo_lote,")"]},e.id_lote_materia_prima))})]})]},e.id_orden_produccion))})]})}},1730:(e,a,t)=>{t.d(a,{A:()=>n});var o=t(5155);t(2115);let n=()=>(0,o.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,o.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,o.jsx)("h4",{children:"Gestion de Empresas"})]})},8213:(e,a,t)=>{t.d(a,{Bs:()=>n,K5:()=>r,Z7:()=>d});let o="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function n(){let e=await fetch("".concat(o,"/orden-produccion/orden-produccion-listaprd-enproceso-finalizada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let a=await e.json();return Array.isArray(a.ordenes_produccion)?a.ordenes_produccion:[]}async function r(e,a){if(console.log("actualizar ot "+e+" a estado: "+a),!(await fetch("".concat(o,"/orden-produccion/update-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_produccion:e,estado:a})})).ok)throw Error("Error updating orden de produccion")}async function d(e){console.log("fetch ordenes de produccion en estado: "+e);let a=await fetch("".concat(o,"/orden-produccion/listar-orden-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado_orden_produccion:e})});if(!a.ok)throw Error("Error fetching productos");return(await a.json()).ordenes_produccion}}}]);