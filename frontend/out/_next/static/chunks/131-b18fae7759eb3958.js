"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[131],{294:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(5155),d=a(2115),n=a(8213);let r={en_proceso:"bg-yellow-100 text-yellow-700",planificada:"bg-blue-100 text-blue-700",finalizada:"bg-green-100 text-green-700",pendiente:"bg-gray-100 text-gray-700"},o=["en_proceso","planificada","finalizada","pendiente"],l=[{value:"id_orden_produccion",label:"ID Orden"},{value:"id_pedido",label:"ID Pedido"},{value:"id_cliente",label:"ID Cliente"},{value:"id_producto",label:"ID Producto"},{value:"fecha_creacion_orden_venta",label:"Fecha Creaci\xf3n"},{value:"fechaentrega_orden_venta",label:"Fecha Entrega"},{value:"estado_orden_produccion",label:"Estado"}];function c(e){let{ordenes:t,onEstadoChange:a}=e,[c,i]=(0,d.useState)("fecha_creacion_orden_venta"),[x,p]=(0,d.useState)(!0),[m,h]=(0,d.useState)(null),[u,_]=(0,d.useState)(""),b=(0,d.useMemo)(()=>{let e=[...t];return e.sort((e,t)=>{let a=e[c],s=t[c];return(("id_orden_produccion"===c||"id_pedido"===c||"id_cliente"===c||"id_producto"===c)&&(a=Number(a),s=Number(s)),("fecha_creacion_orden_venta"===c||"fechaentrega_orden_venta"===c)&&(a=new Date(a).getTime(),s=new Date(s).getTime()),"number"==typeof a&&"number"==typeof s)?x?a-s:s-a:x?String(a).localeCompare(String(s)):String(s).localeCompare(String(a))}),e},[t,c,x]),g=(e,t)=>{h(e),_(t)},j=async e=>{a&&a(e,u);try{console.log("actualizar ot a: "+e+" estado: "+u),await (0,n.K)(e,u),h(null),_(""),window.location.reload()}catch(e){alert("Error al actualizar el estado"),console.log("error al actualizar estado de OP: "+e),h(null)}},y=()=>{h(null)};return(0,s.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-primary",children:"\xd3rdenes de Producci\xf3n"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{htmlFor:"ordenar",className:"text-sm font-medium",children:"Ordenar por:"}),(0,s.jsx)("select",{id:"ordenar",value:c,onChange:e=>i(e.target.value),className:"border rounded px-2 py-1 text-sm",children:l.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,s.jsx)("button",{className:"ml-2 px-2 py-1 rounded bg-neutral-light text-xs",onClick:()=>p(e=>!e),title:"Invertir orden",children:x?"Ascendente ↑":"Descendente ↓"})]})]}),(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 hidden md:table",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"ID Orden"}),(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"ID Pedido"}),(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"Cliente"}),(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"Producto"}),(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"Cantidad"}),(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"Fecha Creaci\xf3n"}),(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"Fecha Entrega"}),(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"Estado"}),(0,s.jsx)("th",{className:"px-2 py-2 text-left text-xs font-semibold text-gray-700",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:b.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-100 transition",children:[(0,s.jsx)("td",{className:"px-2 py-2 text-sm",children:e.id_orden_produccion}),(0,s.jsx)("td",{className:"px-2 py-2 text-sm",children:e.id_pedido}),(0,s.jsxs)("td",{className:"px-2 py-2 text-sm",children:[e.nombre_cliente," ",e.apellido_cliente]}),(0,s.jsx)("td",{className:"px-2 py-2 text-sm",children:e.nombre_producto}),(0,s.jsx)("td",{className:"px-2 py-2 text-sm",children:e.cantidad_producto}),(0,s.jsx)("td",{className:"px-2 py-2 text-sm",children:e.fecha_creacion_orden_venta}),(0,s.jsx)("td",{className:"px-2 py-2 text-sm",children:e.fechaentrega_orden_venta}),(0,s.jsx)("td",{className:"px-2 py-2 text-sm",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(r[e.estado_orden_produccion]||"bg-gray-200 text-gray-700"),children:e.estado_orden_produccion.replace("_"," ")})}),(0,s.jsx)("td",{className:"px-2 py-2 text-sm",children:m===e.id_orden_produccion?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("select",{value:u,onChange:e=>_(e.target.value),className:"border rounded px-2 py-1 text-xs",children:o.map(e=>(0,s.jsx)("option",{value:e,children:e.replace("_"," ")},e))}),(0,s.jsx)("button",{className:"px-2 py-1 bg-green-200 rounded text-xs",onClick:()=>j(e.id_orden_produccion),children:"Aceptar"}),(0,s.jsx)("button",{className:"px-2 py-1 bg-red-200 rounded text-xs",onClick:y,children:"Cancelar"})]}):(0,s.jsx)("button",{className:"px-2 py-1 bg-blue-200 rounded text-xs",onClick:()=>g(e.id_orden_produccion,e.estado_orden_produccion),children:"Editar estado"})})]},e.id_orden_produccion))})]}),(0,s.jsx)("div",{className:"md:hidden mt-6 space-y-4",children:b.map(e=>(0,s.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsxs)("span",{className:"font-bold text-primary",children:["Orden #",e.id_orden_produccion]}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(r[e.estado_orden_produccion]||"bg-gray-200 text-gray-700"),children:e.estado_orden_produccion.replace("_"," ")})]}),(0,s.jsxs)("div",{className:"mb-1 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Pedido:"})," ",e.id_pedido]}),(0,s.jsxs)("div",{className:"mb-1 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Cliente:"})," ",e.nombre_cliente," ",e.apellido_cliente]}),(0,s.jsxs)("div",{className:"mb-1 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Producto:"})," ",e.nombre_producto]}),(0,s.jsxs)("div",{className:"mb-1 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Cantidad:"})," ",e.cantidad_producto]}),(0,s.jsxs)("div",{className:"mb-1 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Fecha Creaci\xf3n:"})," ",e.fecha_creacion_orden_venta]}),(0,s.jsxs)("div",{className:"mb-1 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Fecha Entrega:"})," ",e.fechaentrega_orden_venta]}),(0,s.jsx)("div",{className:"mt-2",children:m===e.id_orden_produccion?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("select",{value:u,onChange:e=>_(e.target.value),className:"border rounded px-2 py-1 text-xs",children:o.map(e=>(0,s.jsx)("option",{value:e,children:e.replace("_"," ")},e))}),(0,s.jsx)("button",{className:"px-2 py-1 bg-green-200 rounded text-xs",onClick:()=>j(e.id_orden_produccion),children:"Aceptar"}),(0,s.jsx)("button",{className:"px-2 py-1 bg-red-200 rounded text-xs",onClick:y,children:"Cancelar"})]}):(0,s.jsx)("button",{className:"px-2 py-1 bg-blue-200 rounded text-xs",onClick:()=>g(e.id_orden_produccion,e.estado_orden_produccion),children:"Editar estado"})})]},e.id_orden_produccion))})]})}},1730:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(5155);a(2115);let d=()=>(0,s.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,s.jsx)("h4",{children:"Gestion de Empresas"})]})},8213:(e,t,a)=>{a.d(t,{B:()=>d,K:()=>n});let s="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function d(){let e=await fetch("".concat(s,"/orden-produccion"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let t=await e.json();return console.log(t),t.ordenes_produccion}async function n(e,t){if(console.log("actualizar ot "+e+" a estado: "+t),!(await fetch("".concat(s,"/orden-produccion/update-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_produccion:e,estado:t})})).ok)throw Error("Error updating orden de produccion")}}}]);