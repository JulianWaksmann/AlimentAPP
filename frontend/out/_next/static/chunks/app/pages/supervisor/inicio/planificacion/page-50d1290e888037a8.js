(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2859],{51730:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});var o=a(95155);a(12115);var n=a(20063),r=a(84926);let s=()=>{let e=(0,n.useRouter)();return(0,o.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center relative flex items-center justify-center",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,o.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,o.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,o.jsx)(r.A,{size:16}),(0,o.jsx)("span",{children:"Salir"})]})]})}},65060:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var o=a(95155),n=a(51730),r=a(12115),s=a(96440),i=a(36385),c=a(12411),d=a(97081);let l={atrasado:"#FFA500",en_tiempo:"#16A34A",por_vencer:"#DC2626"};function u(e){let{planificacion:t}=e,[a,n]=(0,r.useState)(!1),[s,u]=(0,r.useState)(null),p=(0,r.useMemo)(()=>t?Object.entries(t).flatMap(e=>{let[t,a]=e;return a.map(e=>({id:String(e.id_orden_produccion),title:"#".concat(e.id_orden_produccion),start:t,backgroundColor:l[e.estado_pedido],borderColor:l[e.estado_pedido],extendedProps:{estado:e.estado_pedido}}))}):[],[t]);return(0,o.jsxs)("div",{children:[(0,o.jsx)(i.A,{plugins:[c.A,d.Ay],initialView:"dayGridMonth",events:p,eventContent:e=>{let t=Number(e.event.id),a=e.event.extendedProps.estado,r=e.event.startStr;return(0,o.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,o.jsx)("div",{className:"text-xs font-medium",style:{color:"white"},children:e.event.title}),(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),u({id:t,estado:a,fecha:r}),n(!0)},className:"ml-2 text-[10px] bg-white text-black rounded px-1 py-0.5",children:"ver m\xe1s"})]})},height:"auto",dayMaxEventRows:!0}),a&&s&&(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:["Orden #",s.id]}),(0,o.jsxs)("p",{className:"text-sm text-gray-700",children:["Estado: ",s.estado]}),(0,o.jsxs)("p",{className:"text-sm text-gray-700",children:["Fecha: ",s.fecha]}),(0,o.jsx)("div",{className:"mt-4 flex justify-end",children:(0,o.jsx)("button",{onClick:()=>n(!1),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Cerrar"})})]})})]})}let p=()=>{let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{!async function(){let e=await (0,s.tv)();console.log(e),t(e)}()},[]);let a=e.reduce((e,t)=>({...e,...t}),{});return(0,o.jsxs)("div",{className:"min-h-screen bg-neutral-light",children:[(0,o.jsx)(n.default,{}),(0,o.jsx)("div",{className:"p-2",children:(0,o.jsx)(u,{planificacion:a})})]})}},74191:(e,t,a)=>{Promise.resolve().then(a.bind(a,65060))},96440:(e,t,a)=>{"use strict";a.d(t,{Ec:()=>n,N0:()=>s,sI:()=>i,tv:()=>c,w_:()=>r});let o="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function n(e){let t=await fetch("".concat(o,"/tanda-produccion/post-obtener-tanda-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:e})});if(!t.ok)throw Error("Error fetching tandas sugeridas");let a=await t.json();return console.log("tandas"+a.lineas_produccion),a.lineas_produccion}async function r(e,t){if(console.log("actualizar ot "+e+" a estado: "+t),console.log("actualizar ot "+e+" a estado: "+t),!(await fetch("".concat(o,"/tanda-produccion/post-update-tandas-produccion-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_tandas:e,estado:t})})).ok)throw Error("Error updating tanda produccion")}async function s(){let e=await fetch("".concat(o,"/tanda-produccion/get-all-ordenes-produccion-aceptadas-por-linea-produccion"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error generating tanda");let t=await e.json();return console.log(t),t.lineas_produccion}async function i(e){console.log("Crear Tanda Produccion Manual: ",JSON.stringify({id_linea_produccion:e.id_linea_produccion,ordenes_produccion:e.ordenes_produccion}));let t=await fetch("".concat(o,"/tanda-produccion/post-crear-tandas-produccion-manual"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw console.log("Error creating tanda produccion manual:",e),Error(e.error||"Error creating tanda produccion manual")}return t.json()}async function c(){try{let e=await fetch("".concat(o,"/orden-produccion/planificador_op_daily"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.error||"Error fetching planificacion data")}return await e.json()}catch(e){throw console.log("error general: "+e),e}}}},e=>{e.O(0,[6018,1949,8441,1255,7358],()=>e(e.s=74191)),_N_E=e.O()}]);