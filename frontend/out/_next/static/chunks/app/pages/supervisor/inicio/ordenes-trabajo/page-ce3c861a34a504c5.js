(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{3122:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(5155),s=a(1730),o=a(2115),r=a(8213),d=a(294),i=a(8569);function c(e){let{solicitudes:t}=e,a=(e,t)=>{window.confirm("Confirmar acci\xf3n")&&((0,i.OV)(e,t),window.location.reload(),console.log("ID solicitud:",e,"Acci\xf3n:",t))};return(0,n.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Solicitudes de Venta"}),(0,n.jsx)("div",{className:" mt-6 space-y-4",children:t.map(e=>(0,n.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,n.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,n.jsxs)("span",{className:"font-bold text-primary",children:["Solicitud #",e.id_orden_venta]})}),(0,n.jsx)("div",{className:"mb-1 text-sm font-semibold",children:"Productos:"}),(0,n.jsx)("div",{className:"mb-1 text-sm flex flex-col gap-1",children:Array.isArray(e.productos)?e.productos.map(e=>(0,n.jsxs)("span",{children:[e.nombre," : ",e.cantidad]},e.id)):(0,n.jsxs)("span",{children:[e.productos.nombre," : ",e.productos.cantidad]})}),(0,n.jsxs)("div",{className:"mb-1 text-sm",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Fecha Pedido:"})," ",e.fecha_pedido]}),(0,n.jsxs)("div",{className:"mb-1 text-sm",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Fecha Entrega:"})," ",e.fecha_entrega]}),(0,n.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,n.jsx)("button",{className:"px-2 py-1 bg-green-200 rounded text-xs",onClick:()=>a(e.id_orden_venta,"confirmada"),children:"Aceptar"}),(0,n.jsx)("button",{className:"px-2 py-1 bg-red-200 rounded text-xs",onClick:()=>a(e.id_orden_venta,"cancelada"),children:"Rechazar"})]})]},e.id_orden_venta))})]})}let l=()=>{let[e,t]=(0,o.useState)([]),[a,l]=(0,o.useState)([]);return(0,o.useEffect)(()=>{!async function(){l(await (0,i.NV)())}()},[]),(0,o.useEffect)(()=>{!async function(){t(await (0,r.B)())}()},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)(s.A,{}),(0,n.jsx)("div",{className:" items-center p-6 bg-white border-b border-details",children:(0,n.jsx)(c,{solicitudes:a})}),(0,n.jsx)("div",{className:"flex items-center p-6 bg-white border-b border-details",children:(0,n.jsx)(d.A,{ordenes:e})})]})}},5643:(e,t,a)=>{Promise.resolve().then(a.bind(a,3122))},8569:(e,t,a)=>{"use strict";a.d(t,{NV:()=>r,OV:()=>d,X6:()=>s,lm:()=>o});let n="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function s(){let e=await fetch("".concat(n,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");return(await e.json()).data}async function o(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(n,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function r(){let e=await fetch("".concat(n,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function d(e,t){let a=await fetch("".concat(n,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!a.ok){let e=await a.json();throw Error("Error updating estado: ".concat(a.status," - ").concat(JSON.stringify(e)))}return a.json()}}},e=>{e.O(0,[131,441,255,358],()=>e(e.s=5643)),_N_E=e.O()}]);