(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9807],{1730:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155);a(2115);let n=()=>(0,s.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,s.jsx)("h4",{children:"Gestion de Empresas"})]})},4212:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),n=a(2115),o=a(8569);function r(e){let{solicitudes:t}=e,a=(e,t)=>{window.confirm("Confirmar acci\xf3n")&&((0,o.OV)(e,t),window.location.reload(),console.log("ID solicitud:",e,"Acci\xf3n:",t))};return(0,s.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Solicitudes de Venta"}),0===t.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"text-center p-4",children:"No hay pedidos en espera de materia prima."})}):(0,s.jsx)("div",{className:" mt-6 space-y-4",children:t.map(e=>(0,s.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,s.jsxs)("span",{className:"font-bold text-primary",children:["Solicitud #",e.id_orden_venta]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Cliente:"})," ",e.nombre_contacto," ",e.apellido_contacto]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Valor del pedido:"})," $",e.valor_total_pedido]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Raz\xf3n Social:"})," ",e.razon_social]}),(0,s.jsx)("div",{className:"mb-1 font-semibold",children:"Productos:"}),(0,s.jsx)("div",{className:"mb-1 text-sm flex flex-col gap-1",children:Array.isArray(e.productos)?e.productos.map(e=>(0,s.jsxs)("span",{children:[e.nombre," - cantidad: ",e.cantidad]},e.id)):(0,s.jsxs)("span",{children:[e.productos.nombre," : ",e.productos.cantidad]})}),(0,s.jsxs)("div",{children:[" ",(0,s.jsx)("span",{className:"font-semibold",children:"contacto: "}),e.telefono," - ",e.email]}),(0,s.jsxs)("div",{className:"mb-1 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Fecha Pedido:"})," ",e.fecha_pedido]}),(0,s.jsxs)("div",{className:"mb-1 text-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Fecha Entrega Solicitada:"})," ",e.fecha_entrega]}),(0,s.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,s.jsx)("button",{className:"px-2 py-1 bg-green-200 rounded text-xs",onClick:()=>a(e.id_orden_venta,"confirmada"),children:"Aceptar"}),(0,s.jsx)("button",{className:"px-2 py-1 bg-red-200 rounded text-xs",onClick:()=>a(e.id_orden_venta,"cancelada"),children:"Rechazar"})]})]},e.id_orden_venta))})]})}var d=a(1730);let i=()=>{let[e,t]=(0,n.useState)([]);return(0,n.useEffect)(()=>{!async function(){t(await (0,o.NV)())}()},[]),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.A,{}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4 text-primary text-center m-2",children:"Ventas Pendientes de Aprobaci\xf3n"}),(0,s.jsx)("div",{className:" items-center p-6 bg-white border-b border-details",children:(0,s.jsx)(r,{solicitudes:e})})]})}},7843:(e,t,a)=>{Promise.resolve().then(a.bind(a,4212))},8569:(e,t,a)=>{"use strict";a.d(t,{NV:()=>r,OV:()=>d,X6:()=>n,lm:()=>o});let s="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function n(){let e=await fetch("".concat(s,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");return(await e.json()).data}async function o(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(s,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function r(){let e=await fetch("".concat(s,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function d(e,t){let a=await fetch("".concat(s,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!a.ok){let e=await a.json();throw Error("Error updating estado: ".concat(a.status," - ").concat(JSON.stringify(e)))}return a.json()}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=7843)),_N_E=e.O()}]);