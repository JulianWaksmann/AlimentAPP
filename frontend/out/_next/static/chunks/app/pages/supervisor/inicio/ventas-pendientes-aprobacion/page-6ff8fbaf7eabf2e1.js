(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9807],{7843:(e,t,n)=>{Promise.resolve().then(n.bind(n,74212))},15239:(e,t,n)=>{"use strict";n.d(t,{default:()=>r.a});var a=n(54652),r=n.n(a)},20063:(e,t,n)=>{"use strict";var a=n(47260);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},28569:(e,t,n)=>{"use strict";n.d(t,{$1:()=>l,A1:()=>m,LP:()=>h,NV:()=>s,OV:()=>i,Ob:()=>g,Sr:()=>u,UE:()=>f,X6:()=>r,dC:()=>c,gq:()=>p,lm:()=>o,s1:()=>d});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function r(){let e=await fetch("".concat(a,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");return(await e.json()).data}async function o(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(a,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function s(){let e=await fetch("".concat(a,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function i(e,t){let n=await fetch("".concat(a,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!n.ok){let e=await n.json();throw Error("Error updating estado: ".concat(n.status," - ").concat(JSON.stringify(e)))}return n.json()}async function c(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-lista-con-envio"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos terminados");let t=await e.json();return console.log("Pedidos Terminados Data:",t.pedidos),t.pedidos}async function d(e){let t=await fetch("".concat(a,"/gestion-envios/post-get-envios-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:e})});if(!t.ok)throw Error("Error fetching pedidos asignados");let n=await t.json();return console.log("Response Data:",n),n.vehiculos}async function l(e){let t=await fetch("".concat(a,"/gestion-envios/post-update-despachar-all-envios-de-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_vehiculo:e})});if(!t.ok){let e=await t.json();throw Error("Error updating estado envio: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function u(e,t){let n={id_envio:e,estado:t};console.log(JSON.stringify(n));let r=await fetch("".concat(a,"/gestion-envios/post-update-estado-envio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){let e=await r.json();throw Error("Error updating estado envio: ".concat(r.status," - ").concat(JSON.stringify(e)))}return r.json()}async function h(){let e=await fetch("".concat(a,"/crear-orden-venta/get-orden-venta-atrasada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Failed to fetch pedidos reprogramados:",e.statusText),Error("Error fetching pedidos reprogramados");return await e.json()}async function p(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-en-supervision-por-urgencia"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos urgentes");return(await e.json()).orden_ventas_pendiente_supervision_urgencia}async function f(e){let t={id_orden_venta:e};console.log(JSON.stringify(t));let n=await fetch("".concat(a,"/get-orden-venta/planificador_ordenes_produccion_simulacion_ov"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error("Error fetching ordenes que se retrasan");return(await n.json()).ordenes_afectadas}async function m(e,t){let n=await fetch("".concat(a,"/get-orden-venta/get-detalle-pedido-por-id-y-cuil"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_venta:t,cuil:e})}),r=await n.json();if(!n.ok)throw Error(r.error||"Error fetching estado del pedido");return r}async function g(e,t,n,r,o){let s=await fetch("".concat(a,"/crear-direccion/post-obtener-direcciones-normalizadas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_cliente:o,calle:e,numero:t,localidad:n,provincia:r})});if(!s.ok){let e=await s.json();throw Error("Error creating direccion: ".concat(s.status," - ").concat(JSON.stringify(e)))}let i=await s.json();return console.log("Respuesta de crearDireccion en API:",i),i}},51730:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var a=n(95155);n(12115);var r=n(20063),o=n(84926),s=n(15239);let i=()=>{let e=(0,r.useRouter)();return(0,a.jsxs)("header",{className:"relative flex items-center justify-center py-3 text-center text-white",children:[(0,a.jsx)(s.default,{src:"/Banner.jpg",alt:"Banner",fill:!0,priority:!0,className:"object-cover "}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,a.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,a.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,a.jsx)(o.A,{size:16}),(0,a.jsx)("span",{})]})]})}},54652:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return c},getImageProps:function(){return i}});let a=n(28140),r=n(75040),o=n(81356),s=a._(n(71124));function i(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let c=o.Image},71847:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(12115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:l,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...s,width:r,height:r,stroke:n,strokeWidth:c?24*Number(i)/Number(r):i,className:o("lucide",d),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),c=(e,t)=>{let n=(0,a.forwardRef)((n,s)=>{let{className:c,...d}=n;return(0,a.createElement)(i,{ref:s,iconNode:t,className:o("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return n.displayName=r(e),n}},74212:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var a=n(95155),r=n(12115),o=n(28569);function s(e){let{solicitudes:t}=e,[n,s]=(0,r.useState)(!1),[i,c]=(0,r.useState)(null),d=(e,t)=>{c({id:e,accion:t}),s(!0)},l=async()=>{if(!i)return;let{id:e,accion:t}=i;try{await (0,o.OV)(e,t),window.location.reload()}catch(e){console.error("Error actualizando solicitud:",e)}finally{s(!1),c(null)}};return(0,a.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Solicitudes de Venta"}),0===t.length?(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-center p-4",children:"No hay pedidos en espera de materia prima."})}):(0,a.jsx)("div",{className:" mt-6 space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,a.jsxs)("span",{className:"font-bold text-primary",children:["Solicitud #",e.id_orden_venta]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Cliente:"})," ",e.nombre_contacto," ",e.apellido_contacto]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Valor del pedido:"})," $",e.valor_total_pedido]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Raz\xf3n Social:"})," ",e.razon_social]}),(0,a.jsx)("div",{className:"mb-1 font-semibold",children:"Productos:"}),(0,a.jsx)("div",{className:"mb-1 text-sm flex flex-col gap-1",children:Array.isArray(e.productos)?e.productos.map(e=>(0,a.jsxs)("span",{children:[e.nombre," - cantidad: ",e.cantidad]},e.id)):(0,a.jsxs)("span",{children:[e.productos.nombre," : ",e.productos.cantidad]})}),(0,a.jsxs)("div",{children:[" ",(0,a.jsx)("span",{className:"font-semibold",children:"contacto: "}),e.telefono," - ",e.email]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha Pedido:"})," ",e.fecha_pedido]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha Entrega Solicitada:"})," ",e.fecha_entrega]}),(0,a.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,a.jsx)("button",{className:"px-2 py-1 bg-green-200 rounded text-xs",onClick:()=>d(e.id_orden_venta,"confirmada"),children:"Aceptar"}),(0,a.jsx)("button",{className:"px-2 py-1 bg-red-200 rounded text-xs",onClick:()=>d(e.id_orden_venta,"cancelada"),children:"Rechazar"})]})]},e.id_orden_venta))}),n&&i&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Confirmaci\xf3n"}),(0,a.jsxs)("p",{className:"text-sm",children:["\xbfDesea ","confirmada"===i.accion?"aceptar":"rechazar"," la solicitud #",i.id,"?"]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,a.jsx)("button",{onClick:l,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md",children:"S\xed, confirmar"}),(0,a.jsx)("button",{onClick:()=>{s(!1),c(null)},className:"px-4 py-2 bg-gray-100 rounded-md",children:"Cancelar"})]})]})})]})}var i=n(51730);let c=()=>{let[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{!async function(){t(await (0,o.NV)())}()},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.default,{}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4 text-primary text-center m-2",children:"Ventas Pendientes de Aprobaci\xf3n"}),(0,a.jsx)("div",{className:" items-center p-6 bg-white border-b border-details",children:(0,a.jsx)(s,{solicitudes:e})})]})}},84926:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])}},e=>{e.O(0,[1356,8441,1255,7358],()=>e(e.s=7843)),_N_E=e.O()}]);