(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{294:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(5155),o=n(2115);let s={en_proceso:"bg-yellow-100 text-yellow-700",planificada:"bg-blue-100 text-blue-700",finalizada:"bg-green-100 text-green-700",pendiente:"bg-gray-100 text-gray-700"},r=[{value:"id_orden_produccion",label:"ID Orden"},{value:"id_pedido",label:"ID Pedido"},{value:"id_cliente",label:"ID Cliente"},{value:"id_producto",label:"ID Producto"},{value:"fecha_creacion_orden_venta",label:"Fecha Creaci\xf3n"},{value:"fechaentrega_orden_venta",label:"Fecha Entrega"},{value:"estado_orden_produccion",label:"Estado"}];function d(e){let{ordenes:t}=e,[n,d]=(0,o.useState)("fecha_creacion_orden_venta"),[c,i]=(0,o.useState)(!1),l=(0,o.useMemo)(()=>{let e=[...t];return e.sort((e,t)=>{let a=e[n],o=t[n];return(("id_orden_produccion"===n||"id_pedido"===n||"id_cliente"===n||"id_producto"===n)&&(a=Number(a),o=Number(o)),("fecha_creacion_orden_venta"===n||"fechaentrega_orden_venta"===n)&&(a=new Date(a).getTime(),o=new Date(o).getTime()),"number"==typeof a&&"number"==typeof o)?c?a-o:o-a:c?String(a).localeCompare(String(o)):String(o).localeCompare(String(a))}),e},[t,n,c]);return(0,a.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-primary",children:"\xd3rdenes de Producci\xf3n"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"ordenar",className:"text-sm font-medium",children:"Ordenar por:"}),(0,a.jsx)("select",{id:"ordenar",value:n,onChange:e=>d(e.target.value),className:"border rounded px-2 py-1 text-sm",children:r.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("button",{className:"ml-2 px-2 py-1 rounded bg-neutral-light text-xs",onClick:()=>i(e=>!e),title:"Invertir orden",children:c?"Ascendente ↑":"Descendente ↓"})]})]}),(0,a.jsx)("div",{className:" mt-6 min-w-full  ",children:l.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("span",{className:"font-bold text-primary",children:["Orden #",e.id_orden_produccion]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(s[e.estado_orden_produccion]||"bg-gray-200 text-gray-700"),children:e.estado_orden_produccion.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("span",{className:"font-semibold mb-1 text-sm",children:["Pedido: ",e.id_pedido]}),(0,a.jsxs)("span",{className:"font-semibold mb-1 text-sm",children:["Cliente: ",e.nombre_cliente," ",e.apellido_cliente,"    "]})]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Producto:"})," ",e.nombre_producto]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Cantidad:"})," ",e.cantidad_producto]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha Creaci\xf3n:"})," ",e.fecha_creacion_orden_venta]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha Entrega:"})," ",e.fechaentrega_orden_venta]}),(0,a.jsx)("div",{className:"mt-2"})]},e.id_orden_produccion))})]})}},1730:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(5155);n(2115);let o=()=>(0,a.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,a.jsx)("h4",{children:"Gestion de Empresas"})]})},3122:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(5155),o=n(1730),s=n(2115),r=n(8213),d=n(294),c=n(8569);function i(e){let{solicitudes:t}=e,n=(e,t)=>{window.confirm("Confirmar acci\xf3n")&&((0,c.OV)(e,t),window.location.reload(),console.log("ID solicitud:",e,"Acci\xf3n:",t))};return(0,a.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Solicitudes de Venta"}),(0,a.jsx)("div",{className:" mt-6 space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-2",children:(0,a.jsxs)("span",{className:"font-bold text-primary",children:["Solicitud #",e.id_orden_venta]})}),(0,a.jsx)("div",{className:"mb-1 text-sm font-semibold",children:"Productos:"}),(0,a.jsx)("div",{className:"mb-1 text-sm flex flex-col gap-1",children:Array.isArray(e.productos)?e.productos.map(e=>(0,a.jsxs)("span",{children:[e.nombre," : ",e.cantidad]},e.id)):(0,a.jsxs)("span",{children:[e.productos.nombre," : ",e.productos.cantidad]})}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha Pedido:"})," ",e.fecha_pedido]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha Entrega:"})," ",e.fecha_entrega]}),(0,a.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,a.jsx)("button",{className:"px-2 py-1 bg-green-200 rounded text-xs",onClick:()=>n(e.id_orden_venta,"confirmada"),children:"Aceptar"}),(0,a.jsx)("button",{className:"px-2 py-1 bg-red-200 rounded text-xs",onClick:()=>n(e.id_orden_venta,"cancelada"),children:"Rechazar"})]})]},e.id_orden_venta))})]})}let l=()=>{let[e,t]=(0,s.useState)([]),[n,l]=(0,s.useState)([]);return(0,s.useEffect)(()=>{!async function(){l(await (0,c.NV)())}()},[]),(0,s.useEffect)(()=>{!async function(){t(await (0,r.Bs)())}()},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("div",{className:" items-center p-6 bg-white border-b border-details",children:(0,a.jsx)(i,{solicitudes:n})}),(0,a.jsx)("div",{className:"flex items-center p-6 bg-white border-b border-details",children:(0,a.jsx)(d.A,{ordenes:e})})]})}},5643:(e,t,n)=>{Promise.resolve().then(n.bind(n,3122))},8213:(e,t,n)=>{"use strict";n.d(t,{Bs:()=>o,K5:()=>s,Z7:()=>r});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function o(){let e=await fetch("".concat(a,"/orden-produccion"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let t=await e.json();return console.log(t),t.ordenes_produccion}async function s(e,t){if(console.log("actualizar ot "+e+" a estado: "+t),!(await fetch("".concat(a,"/orden-produccion/update-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_produccion:e,estado:t})})).ok)throw Error("Error updating orden de produccion")}async function r(e){console.log("fetch ordenes de produccion en estado: "+e);let t=await fetch("".concat(a,"/orden-produccion/listar-orden-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado_orden_produccion:e})});if(!t.ok)throw Error("Error fetching productos");let n=await t.json();return console.log(n),n.ordenes_produccion}},8569:(e,t,n)=>{"use strict";n.d(t,{NV:()=>r,OV:()=>d,X6:()=>o,lm:()=>s});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function o(){let e=await fetch("".concat(a,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");return(await e.json()).data}async function s(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(a,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function r(){let e=await fetch("".concat(a,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function d(e,t){let n=await fetch("".concat(a,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!n.ok){let e=await n.json();throw Error("Error updating estado: ".concat(n.status," - ").concat(JSON.stringify(e)))}return n.json()}}},e=>{e.O(0,[441,255,358],()=>e(e.s=5643)),_N_E=e.O()}]);