(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5287],{19955:(e,t,n)=>{Promise.resolve().then(n.bind(n,38596))},20063:(e,t,n)=>{"use strict";var r=n(47260);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},28569:(e,t,n)=>{"use strict";n.d(t,{$1:()=>l,LP:()=>u,NV:()=>s,OV:()=>i,Sr:()=>h,UE:()=>g,X6:()=>o,dC:()=>c,gq:()=>p,lm:()=>a,s1:()=>d});let r="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function o(){let e=await fetch("".concat(r,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");return(await e.json()).data}async function a(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(r,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function s(){let e=await fetch("".concat(r,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function i(e,t){let n=await fetch("".concat(r,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!n.ok){let e=await n.json();throw Error("Error updating estado: ".concat(n.status," - ").concat(JSON.stringify(e)))}return n.json()}async function c(){let e=await fetch("".concat(r,"/gestion-envios/get-pedidos-por-zona"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos terminados");return(await e.json()).zonas}async function d(e){let t=await fetch("".concat(r,"/gestion-envios/post-get-envios-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:e})});if(!t.ok)throw Error("Error fetching pedidos asignados");let n=await t.json();return console.log("Response Data:",n),n.vehiculos}async function l(e){let t=await fetch("".concat(r,"/gestion-envios/post-update-despachar-all-envios-de-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_vehiculo:e})});if(!t.ok){let e=await t.json();throw Error("Error updating estado envio: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function h(e,t){let n={id_envio:e,estado:t};console.log(JSON.stringify(n));let o=await fetch("".concat(r,"/gestion-envios/post-update-estado-envio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok){let e=await o.json();throw Error("Error updating estado envio: ".concat(o.status," - ").concat(JSON.stringify(e)))}return o.json()}async function u(){let e=await fetch("".concat(r,"/crear-orden-venta/get-orden-venta-atrasada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Failed to fetch pedidos reprogramados:",e.statusText),Error("Error fetching pedidos reprogramados");return await e.json()}async function p(){let e=await fetch("".concat(r,"/get-orden-venta/get-orden-venta-en-supervision-por-urgencia"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos urgentes");return(await e.json()).orden_ventas_pendiente_supervision_urgencia}async function g(e){let t=await fetch("".concat(r,"/get-orden-venta/planificador_ordenes_produccion_simulacion_ov"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_venta:e})});if(!t.ok)throw Error("Error fetching ordenes que se retrasan");return(await t.json()).afectadas}},38596:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(95155),o=n(12115),a=n(28569),s=n(51730);let i=()=>{let[e,t]=(0,o.useState)([]),[n,i]=(0,o.useState)(null),[c,d]=(0,o.useState)(!1),[l,h]=(0,o.useState)([]);async function u(e){console.log("Pedido ".concat(e," aprobado.")),d(!1),i(null),f()}async function p(e){console.log("Pedido ".concat(e," cancelado.")),f()}async function g(e){let t=await (0,a.UE)(e);h(t),console.log(t)}async function f(){t(await (0,a.gq)())}return(0,o.useEffect)(()=>{f()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.default,{}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4 text-primary text-center",children:"Pedidos Urgentes"}),0===e.length?(0,r.jsx)("p",{className:"text-center",children:"No hay pedidos urgentes en este momento."}):(0,r.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)("li",{className:"border p-4 rounded-lg shadow-sm bg-white",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-2",children:["Pedido #",e.id_orden_venta]}),(0,r.jsxs)("p",{className:"text-green-700",children:[(0,r.jsx)("strong",{children:"Valor del Pedido:"})," $",e.valor_total_pedido]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Cliente:"})," ",e.nombre_contacto," ",e.apellido_contacto]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Raz\xf3n Social:"})," ",e.razon_social]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Contacto:"})," ",e.telefono," - ",e.email]}),(0,r.jsxs)("p",{className:"text-red-700",children:[(0,r.jsx)("strong",{children:"Fecha de Entrega:"})," ",new Date(e.fecha_entrega).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Productos:"}),(0,r.jsx)("ul",{className:"list-disc list-inside",children:Array.isArray(e.productos)?e.productos.map(e=>(0,r.jsxs)("li",{children:[e.nombre," - Cantidad: ",e.cantidad," bultos"]},e.id)):(0,r.jsxs)("li",{children:[e.productos.nombre," - Cantidad: ",e.productos.cantidad," bultos"]})})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{className:"rounded bg-green-500 px-4 py-2 text-white hover:bg-green-600",onClick:()=>{i(e),d(!0),g(e.id_orden_venta)},children:"Aprobar"}),(0,r.jsx)("button",{className:"rounded bg-red-500 px-4 py-2 text-white hover:bg-red-600",onClick:()=>p(e.id_orden_venta),children:"Rechazar"})]})]},e.id_orden_venta))}),c&&n&&null!=l&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[0===l.length?(0,r.jsx)("p",{children:"No se retrasar\xe1 ninguna orden de producci\xf3n."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"\xd3rdenes Retrasadas"}),(0,r.jsx)("ul",{className:"list-disc list-inside",children:l.map(e=>(0,r.jsxs)("li",{children:["Orden #",e]},e))})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,r.jsx)("button",{className:"rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600",onClick:()=>d(!1),children:"Cancelar"}),(0,r.jsx)("button",{className:"rounded bg-green-500 px-4 py-2 text-white hover:bg-green-600",onClick:()=>u(n.id_orden_venta),children:"Confirmar"})]})]})})]})]})}},51730:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(95155);n(12115);var o=n(20063),a=n(84926);let s=()=>{let e=(0,o.useRouter)();return(0,r.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center relative flex items-center justify-center",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,r.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,r.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,r.jsx)(a.A,{size:16}),(0,r.jsx)("span",{children:"Salir"})]})]})}},71847:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(12115);let o=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:l,iconNode:h,...u}=e;return(0,r.createElement)("svg",{ref:t,...s,width:o,height:o,stroke:n,strokeWidth:c?24*Number(i)/Number(o):i,className:a("lucide",d),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),c=(e,t)=>{let n=(0,r.forwardRef)((n,s)=>{let{className:c,...d}=n;return(0,r.createElement)(i,{ref:s,iconNode:t,className:a("lucide-".concat(o(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return n.displayName=o(e),n}},84926:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=19955)),_N_E=e.O()}]);