(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{1717:(e,s,t)=>{Promise.resolve().then(t.bind(t,3795))},1730:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var a=t(5155);t(2115);let d=()=>(0,a.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,a.jsx)("h4",{children:"Gestion de Empresas"})]})},3795:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),d=t(1730),r=t(2115);let i=e=>{var s;let{ordenes:t,lineas:d,materiasPrimas:i}=e,[c,n]=(0,r.useState)(null),[l,o]=(0,r.useState)(null),[h,x]=(0,r.useState)(null),p=[...t].sort((e,s)=>{if(!h)return 0;let{key:t,direction:a}=h,d="fechaEntrega"===t?new Date(e[t]).getTime():e[t],r="fechaEntrega"===t?new Date(s[t]).getTime():s[t];return d<r?"asc"===a?-1:1:d>r?"asc"===a?1:-1:0}),u=e=>{let s="asc";h&&h.key===e&&"asc"===h.direction&&(s="desc"),x({key:e,direction:s})},m=e=>h&&h.key===e?"asc"===h.direction?" ^":" v":"",b=c&&null!=(s=i[c.id])?s:[];return(0,a.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[(0,a.jsx)("h2",{className:"mb-4 text-xl font-bold",children:"Ordenes de trabajo"}),(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-primary text-white",children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"cursor-pointer px-3 py-2 text-left",onClick:()=>u("id"),children:["ID",m("id")]}),(0,a.jsxs)("th",{className:"cursor-pointer px-3 py-2 text-left",onClick:()=>u("cliente"),children:["Cliente",m("cliente")]}),(0,a.jsxs)("th",{className:"cursor-pointer px-3 py-2 text-left",onClick:()=>u("producto"),children:["Producto",m("producto")]}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Cantidad"}),(0,a.jsxs)("th",{className:"cursor-pointer px-3 py-2 text-left",onClick:()=>u("fechaEntrega"),children:["Entrega",m("fechaEntrega")]}),(0,a.jsxs)("th",{className:"cursor-pointer px-3 py-2 text-left",onClick:()=>u("estado"),children:["Estado",m("estado")]}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:p.map(e=>(0,a.jsxs)("tr",{className:"odd:bg-neutral-light",children:[(0,a.jsx)("td",{className:"px-3 py-2",children:e.id}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.cliente}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.producto}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.cantidad}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.fechaEntrega}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.estado}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsx)("button",{className:"rounded bg-success px-3 py-1 text-white transition hover:opacity-90",onClick:()=>{n(e),o(null)},children:"Asignar"})})]},e.id))})]}),c&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,a.jsxs)("div",{className:"w-96 rounded-lg bg-white p-6 shadow-lg",children:[(0,a.jsxs)("h3",{className:"mb-4 text-lg font-bold",children:["Asignar orden #",c.id]}),(0,a.jsx)("label",{className:"mb-2 block font-semibold",children:"Linea de produccion"}),(0,a.jsxs)("select",{className:"mb-4 w-full rounded border px-2 py-2",value:null!=l?l:"",onChange:e=>o(Number(e.target.value)),children:[(0,a.jsx)("option",{value:"",children:"Selecciona una linea"}),d.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.nombre," (",e.estado,")"]},e.id))]}),(0,a.jsx)("h4",{className:"mb-2 font-semibold",children:"Materias primas requeridas"}),(0,a.jsxs)("ul",{className:"mb-4 space-y-1 text-sm",children:[b.map(e=>(0,a.jsxs)("li",{className:e.stock>=e.requerido?"text-success":"text-error",children:[e.nombre,": ",e.requerido," (stock ",e.stock,")"]},e.id)),0===b.length&&(0,a.jsx)("li",{className:"text-neutral-dark",children:"No hay recursos definidos para esta orden."})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"rounded bg-gray-300 px-3 py-1 transition hover:bg-gray-400",onClick:()=>n(null),children:"Cancelar"}),(0,a.jsx)("button",{className:"rounded bg-success px-3 py-1 text-white transition hover:opacity-90 disabled:bg-gray-400",disabled:!(e=>{let s=i[e];return!!s&&s.every(e=>e.stock>=e.requerido)})(c.id)||null===l,onClick:()=>{c&&null!==l&&(alert("Orden ".concat(c.id," asignada a la linea ").concat(l,". Se coloca en cola si la linea esta ocupada.")),n(null),o(null))},children:"Confirmar"})]})]})})]})},c=e=>{let{pedidos:s,onAceptar:t}=e,[d,i]=(0,r.useState)(s);return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Pedidos de Venta"}),0===d.length?(0,a.jsx)("p",{className:"text-gray-600",children:"No hay pedidos pendientes"}):(0,a.jsxs)("table",{className:"min-w-full border text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border px-2 py-1",children:"ID Pedido"}),(0,a.jsx)("th",{className:"border px-2 py-1",children:"Productos"}),(0,a.jsx)("th",{className:"border px-2 py-1",children:"Fecha Pedido"}),(0,a.jsx)("th",{className:"border px-2 py-1",children:"Fecha Entrega"}),(0,a.jsx)("th",{className:"border px-2 py-1",children:"Acciones"})]})}),(0,a.jsx)("tbody",{children:d.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border px-2 py-1",children:e.idPedido}),(0,a.jsx)("td",{className:"border px-2 py-1",children:(0,a.jsx)("ul",{className:"list-disc ml-4",children:e.productos.map(e=>(0,a.jsxs)("li",{children:[e.nombre," (x",e.cantidad,")"]},e.idProducto))})}),(0,a.jsx)("td",{className:"border px-2 py-1",children:new Date(e.fechaPedido).toLocaleString()}),(0,a.jsx)("td",{className:"border px-2 py-1",children:new Date(e.fechaEntrega).toLocaleDateString()}),(0,a.jsxs)("td",{className:"border px-2 py-1 space-x-2 text-center",children:[(0,a.jsx)("button",{className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",onClick:()=>(e=>{t(e),i(d.filter(s=>s.idPedido!==e.idPedido))})(e),children:"Aceptar"}),(0,a.jsx)("button",{className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>{var s;return s=e.idPedido,void i(d.filter(e=>e.idPedido!==s))},children:"Rechazar"})]})]},e.idPedido))})]})]})},n=[{idPedido:103,productos:[{idProducto:502,nombre:"Producto B",cantidad:5},{idProducto:504,nombre:"Producto D",cantidad:2}],fechaPedido:"2025-09-13T09:15:00Z",fechaEntrega:"2025-09-18T00:00:00Z"},{idPedido:104,productos:[{idProducto:505,nombre:"Producto C",cantidad:10}],fechaPedido:"2025-09-14T11:20:00Z",fechaEntrega:"2025-09-20T00:00:00Z"}],l=[{id:1,cliente:"Cliente 1",producto:"Producto A",cantidad:10,fechaEntrega:"2025-09-15",estado:"Pendiente"},{id:2,cliente:"Cliente 124",producto:"Producto B",cantidad:10,fechaEntrega:"2025-09-15",estado:"Pendiente"},{id:3,cliente:"Cliente 112",producto:"Producto C",cantidad:10,fechaEntrega:"2025-09-15",estado:"Pendiente"}],o=[{id:1,nombre:"Linea 1",estado:"Disponible"},{id:2,nombre:"Linea 2",estado:"Ocupada"}],h={1:[{id:1,nombre:"Materia X",stock:100,requerido:50},{id:2,nombre:"Materia Y",stock:40,requerido:60}],2:[{id:3,nombre:"Materia Z",stock:75,requerido:30},{id:4,nombre:"Insumo A",stock:20,requerido:40}]},x=()=>{let[e,s]=(0,r.useState)(l);return(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-light",children:[(0,a.jsx)(d.A,{}),(0,a.jsxs)("main",{className:"p-6 space-y-6",children:[(0,a.jsx)(c,{pedidos:n,onAceptar:t=>{let a={id:e.length+1,cliente:"Cliente pedido ".concat(t.idPedido),producto:t.productos.map(e=>e.nombre).join(", "),cantidad:t.productos.reduce((e,s)=>e+s.cantidad,0),fechaEntrega:t.fechaEntrega.split("T")[0],estado:"Pendiente"};s(e=>[...e,a])}}),(0,a.jsx)(i,{ordenes:e,lineas:o,materiasPrimas:h})]})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=1717)),_N_E=e.O()}]);