(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[194],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},520:(e,t,a)=>{Promise.resolve().then(a.bind(a,2285))},1730:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(5155);a(2115);let r=()=>(0,s.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,s.jsx)("h4",{children:"Gestion de Empresas"})]})},2285:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),r=a(2115),n=a(1730),l=a(63);let i=()=>{let[e,t]=(0,r.useState)(1),[a,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),[m,p]=(0,r.useState)(["","","",""]),[x,h]=(0,r.useState)(!1),[f,b]=(0,r.useState)(""),y=(0,l.useRouter)(),j=[(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null),(0,r.useRef)(null)],N=async e=>{e.preventDefault(),c(!0),d("");let s=await fetch("/api/recuperarContrase\xf1a",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sendCode",email:a})});c(!1),s.ok?t(2):d("No se pudo enviar el c\xf3digo. Intenta nuevamente.")},v=async e=>{e.preventDefault(),c(!0),d("");let s=await fetch("/api/recuperarContrase\xf1a",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"verifyCode",email:a,code:m.join("")})});c(!1),s.ok?(h(!0),t(3)):d("C\xf3digo incorrecto. Intenta nuevamente.")},g=async e=>{e.preventDefault(),c(!0),d("");let t=await fetch("/api/recuperarContrase\xf1a",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"updatePassword",email:a,code:m.join(""),newPassword:f})});c(!1),t.ok?y.push("/"):d("No se pudo actualizar la contrase\xf1a. Intenta nuevamente.")};return(0,s.jsxs)("div",{children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-center mb-4 text-primary",children:"Recuperar Credenciales"}),1===e&&(0,s.jsxs)("form",{onSubmit:N,className:"flex flex-col gap-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{type:"email",required:!0,value:a,onChange:e=>i(e.target.value),className:"rounded border px-3 py-2 w-full focus:outline-primary",placeholder:"tu@email.com"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"bg-primary text-white rounded py-2 font-semibold mt-2 hover:opacity-90 transition",children:o?"Enviando...":"Enviar c\xf3digo"}),u&&(0,s.jsx)("p",{className:"text-red-500 text-sm text-center",children:u})]}),2===e&&(0,s.jsxs)("form",{onSubmit:v,className:"flex flex-col gap-4 items-center",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-center",children:"Ingresa el c\xf3digo recibido"}),(0,s.jsx)("div",{className:"flex gap-2 justify-center mb-2",children:m.map((e,t)=>(0,s.jsx)("input",{ref:j[t],type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>((e,t)=>{var a,s;if(!/^[0-9]?$/.test(t))return;let r=[...m];r[e]=t,p(r),t&&e<3&&(null==(a=j[e+1].current)||a.focus()),!t&&e>0&&(null==(s=j[e-1].current)||s.focus())})(t,e.target.value),className:"w-12 h-12 text-center text-xl border rounded focus:outline-primary"},t))}),(0,s.jsx)("button",{type:"submit",disabled:o||m.some(e=>!e),className:"bg-primary text-white rounded py-2 font-semibold w-full hover:opacity-90 transition",children:o?"Verificando...":"Verificar c\xf3digo"}),u&&(0,s.jsx)("p",{className:"text-red-500 text-sm text-center",children:u})]}),3===e&&(0,s.jsxs)("form",{onSubmit:g,className:"flex flex-col gap-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Nueva contrase\xf1a"}),(0,s.jsx)("input",{type:"password",required:!0,value:f,onChange:e=>b(e.target.value),className:"rounded border px-3 py-2 w-full focus:outline-primary",placeholder:"Nueva contrase\xf1a"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"bg-success text-white rounded py-2 font-semibold mt-2 hover:opacity-90 transition",children:o?"Actualizando...":"Actualizar contrase\xf1a"}),u&&(0,s.jsx)("p",{className:"text-red-500 text-sm text-center",children:u})]})]})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=520)),_N_E=e.O()}]);