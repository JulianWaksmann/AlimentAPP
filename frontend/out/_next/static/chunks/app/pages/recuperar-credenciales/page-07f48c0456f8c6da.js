(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7194],{15239:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(54652),s=r.n(a)},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},51730:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(95155);r(12115);var s=r(20063),n=r(84926),o=r(15239);let i=()=>{let e=(0,s.useRouter)();return(0,a.jsxs)("header",{className:"relative flex items-center justify-center py-3 text-center text-white",children:[(0,a.jsx)(o.default,{src:"/Banner.jpg",alt:"Banner",fill:!0,priority:!0,className:"object-cover "}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,a.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,a.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,a.jsx)(n.A,{size:16}),(0,a.jsx)("span",{})]})]})}},54652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return i}});let a=r(28140),s=r(75040),n=r(81356),o=a._(r(71124));function i(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=n.Image},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...m}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:l?24*Number(i)/Number(s):i,className:n("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,a.createElement)(i,{ref:o,iconNode:t,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return r.displayName=s(e),r}},84926:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},90520:(e,t,r)=>{Promise.resolve().then(r.bind(r,91155))},91155:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(95155),s=r(12115),n=r(51730),o=r(20063);let i="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function l(e){let t=await fetch("".concat(i,"/recuperar-password/enviar-codigo-verificacion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.toLowerCase()})});return t.ok?{success:!0}:{success:!1,error:(await t.json()).error||"Error en login"}}async function c(e,t){let r=await fetch("".concat(i,"/recuperar-password/validar-codigo-verificacion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.toLowerCase(),codigo_verificacion:t})});return r.ok?{success:!0}:{success:!1,error:(await r.json()).error||"Error en login"}}async function u(e,t){let r=await fetch("".concat(i,"/recuperar-password/update-password-empleado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.toLowerCase(),nuevo_password:t})});return r.ok?{success:!0}:{success:!1,error:(await r.json()).error||"Error en login"}}let d=()=>{let[e,t]=(0,s.useState)(1),[r,i]=(0,s.useState)(""),[d,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(["","","","","",""]),[h,x]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[y,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(""),[N,C]=(0,s.useState)("error"),S=[(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null),(0,s.useRef)(null)],k=(0,o.useRouter)(),R=async e=>{e.preventDefault(),m(!0);let a=await l(r);m(!1),a.success?t(2):(w(a.error||"No se pudo enviar el c\xf3digo. Intenta nuevamente."),C("error"),v(!0))},E=async e=>{e.preventDefault(),m(!0);let a=await c(r,p.join(""));m(!1),a.success?t(3):(w(a.error||"C\xf3digo incorrecto. Intenta nuevamente."),C("error"),v(!0))},A=async e=>{if(e.preventDefault(),h!==g){w("Las contrase\xf1as no coinciden."),C("error"),v(!0);return}m(!0);let t=await u(r,h);m(!1),t.success?(w("Contrase\xf1a actualizada con \xe9xito."),C("success"),v(!0),setTimeout(()=>k.push("/"),1500)):(w(t.error||"No se pudo actualizar la contrase\xf1a. Intenta nuevamente."),C("error"),v(!0))};return(0,a.jsxs)("div",{children:[(0,a.jsx)(n.default,{}),(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center px-4",children:[(0,a.jsxs)("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center mb-4 text-primary",children:"Recuperar Credenciales"}),1===e&&(0,a.jsxs)("form",{onSubmit:R,className:"flex flex-col gap-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Correo electr\xf3nico"}),(0,a.jsx)("input",{type:"email",required:!0,value:r,onChange:e=>i(e.target.value),className:"rounded border px-3 py-2 w-full focus:outline-primary",placeholder:"tu@email.com"}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"bg-primary text-white rounded py-2 font-semibold mt-2 hover:opacity-90 transition",children:d?"Enviando...":"Enviar c\xf3digo"})]}),2===e&&(0,a.jsxs)("form",{onSubmit:E,className:"flex flex-col gap-4 items-center",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-center",children:"Ingresa el c\xf3digo recibido"}),(0,a.jsx)("div",{className:"flex gap-2 justify-center mb-2",children:p.map((e,t)=>(0,a.jsx)("input",{ref:S[t],type:"text",inputMode:"numeric",maxLength:1,value:e,onChange:e=>((e,t)=>{var r,a;if(!/^[0-9]?$/.test(t))return;let s=[...p];s[e]=t,f(s),t&&e<5&&(null==(r=S[e+1].current)||r.focus()),!t&&e>0&&(null==(a=S[e-1].current)||a.focus())})(t,e.target.value),className:"w-10 h-10 text-center text-xl border rounded focus:outline-primary"},t))}),(0,a.jsx)("button",{type:"submit",disabled:d||p.some(e=>!e),className:"bg-primary text-white rounded py-2 font-semibold w-full hover:opacity-90 transition",children:d?"Verificando...":"Verificar c\xf3digo"})]}),3===e&&(0,a.jsxs)("form",{onSubmit:A,className:"flex flex-col gap-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Nueva contrase\xf1a"}),(0,a.jsx)("input",{type:"password",required:!0,value:h,onChange:e=>x(e.target.value),className:"rounded border px-3 py-2 w-full focus:outline-primary",placeholder:"Nueva contrase\xf1a"}),(0,a.jsx)("label",{className:"text-sm font-medium",children:"Repetir nueva contrase\xf1a"}),(0,a.jsx)("input",{type:"password",required:!0,value:g,onChange:e=>b(e.target.value),className:"rounded border px-3 py-2 w-full focus:outline-primary",placeholder:"Repetir nueva contrase\xf1a"}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"bg-success text-white rounded py-2 font-semibold mt-2 hover:opacity-90 transition",children:d?"Actualizando...":"Actualizar contrase\xf1a"})]})]}),y&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,a.jsxs)("div",{className:"rounded-lg p-6 shadow-lg w-80 text-center ".concat("error"===N?"bg-red-50 border border-red-300":"bg-green-50 border border-green-300"),children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-2 ".concat("error"===N?"text-red-600":"text-green-600"),children:"error"===N?"Error":"\xc9xito"}),(0,a.jsx)("p",{className:"mb-4 text-sm",children:j}),(0,a.jsx)("button",{onClick:()=>v(!1),className:"px-4 py-2 rounded font-semibold ".concat("error"===N?"bg-red-600 text-white":"bg-green-600 text-white"," hover:opacity-90 transition"),children:"Cerrar"})]})})]})]})}}},e=>{e.O(0,[1356,8441,1255,7358],()=>e(e.s=90520)),_N_E=e.O()}]);