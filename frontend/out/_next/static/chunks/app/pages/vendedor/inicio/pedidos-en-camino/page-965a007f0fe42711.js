(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7446],{20463:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});var a=o(95155),n=o(12115),s=o(28569);let r=()=>{let[e,t]=(0,n.useState)([]),[o,r]=(0,n.useState)(!0),[i,c]=(0,n.useState)(null),d=(0,n.useCallback)(async()=>{r(!0),c(null);try{let e=await (0,s.s1)("despachado");t(e||[])}catch(e){c("Error al cargar los pedidos asignados. Intente de nuevo."),console.error(e)}finally{r(!1)}},[]);return(0,n.useEffect)(()=>{d()},[d]),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Pedidos en Camino"}),o&&(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Cargando..."}),i&&(0,a.jsx)("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded-md",children:i}),!o&&!i&&0===e.length&&(0,a.jsx)("p",{className:"text-center text-gray-600 mt-8",children:"No hay pedidos Despachados."}),(0,a.jsx)("div",{className:"space-y-8",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gray-800 text-white p-4 flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-bold",children:[e.modelo," - ",e.patente]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:[e.nombre_conductor," ",e.apellido_conductor]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["DNI: ",e.dni_conductor]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["Empresa: ",e.empresa]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Pedidos en este env\xedo:"}),e.envios.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex justify-between"}),(0,a.jsxs)("p",{className:"text-sm text-gray-800",children:["Cliente: ",e.nombre_contacto," ",e.apellido_contacto]}),(0,a.jsxs)("p",{className:"text-m text-green-900",children:["Valor total: $",e.valor_total_pedido.toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Fecha de entrega solicitada: ",e.fecha_entrega_solicitada]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Email: ",e.email]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Tel\xe9fono: ",e.telefono]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Peso: ",e.peso_total_pedido," kg"]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700",children:"Productos:"}),(0,a.jsx)("ul",{className:"list-disc list-inside",children:e.productos.map(e=>(0,a.jsxs)("li",{className:"text-sm text-gray-600",children:[e.nombre," - Bultos: ",e.cantidad]},e.id))})]})]},e.id_orden_venta))]})]},e.id_vehiculo))})]})})}},28569:(e,t,o)=>{"use strict";o.d(t,{$1:()=>l,A1:()=>f,LP:()=>h,NV:()=>r,OV:()=>i,Ob:()=>m,Sr:()=>p,UE:()=>u,X6:()=>n,dC:()=>c,gq:()=>g,lm:()=>s,s1:()=>d});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function n(){let e=await fetch("".concat(a,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");return(await e.json()).data}async function s(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(a,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function r(){let e=await fetch("".concat(a,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function i(e,t){let o=await fetch("".concat(a,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!o.ok){let e=await o.json();throw Error("Error updating estado: ".concat(o.status," - ").concat(JSON.stringify(e)))}return o.json()}async function c(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-lista-con-envio"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos terminados");let t=await e.json();return console.log("Pedidos Terminados Data:",t.pedidos),t.pedidos}async function d(e){let t=await fetch("".concat(a,"/gestion-envios/post-get-envios-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:e})});if(!t.ok)throw Error("Error fetching pedidos asignados");let o=await t.json();return console.log("Response Data:",o),o.vehiculos}async function l(e){let t=await fetch("".concat(a,"/gestion-envios/post-update-despachar-all-envios-de-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_vehiculo:e})});if(!t.ok){let e=await t.json();throw Error("Error updating estado envio: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function p(e,t){let o={id_envio:e,estado:t};console.log(JSON.stringify(o));let n=await fetch("".concat(a,"/gestion-envios/post-update-estado-envio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!n.ok){let e=await n.json();throw Error("Error updating estado envio: ".concat(n.status," - ").concat(JSON.stringify(e)))}return n.json()}async function h(){let e=await fetch("".concat(a,"/crear-orden-venta/get-orden-venta-atrasada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Failed to fetch pedidos reprogramados:",e.statusText),Error("Error fetching pedidos reprogramados");return await e.json()}async function g(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-en-supervision-por-urgencia"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos urgentes");return(await e.json()).orden_ventas_pendiente_supervision_urgencia}async function u(e){let t={id_orden_venta:e};console.log(JSON.stringify(t));let o=await fetch("".concat(a,"/get-orden-venta/planificador_ordenes_produccion_simulacion_ov"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw Error("Error fetching ordenes que se retrasan");return(await o.json()).ordenes_afectadas}async function f(e,t){let o=await fetch("".concat(a,"/get-orden-venta/get-detalle-pedido-por-id-y-cuil"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_venta:t,cuil:e})}),n=await o.json();if(!o.ok)throw Error(n.error||"Error fetching estado del pedido");return n}async function m(e,t,o,n,s){let r=await fetch("".concat(a,"/crear-direccion/post-obtener-direcciones-normalizadas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_cliente:s,calle:e,numero:t,localidad:o,provincia:n})});if(!r.ok){let e=await r.json();throw Error("Error creating direccion: ".concat(r.status," - ").concat(JSON.stringify(e)))}let i=await r.json();return console.log("Respuesta de crearDireccion en API:",i),i}},28936:(e,t,o)=>{Promise.resolve().then(o.bind(o,20463))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=28936)),_N_E=e.O()}]);