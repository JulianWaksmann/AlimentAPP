(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{5055:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(5155),s=a(2115),o=a(8569);let r={confirmada:"bg-green-100 text-green-700",pendiente:"bg-yellow-100 text-yellow-700",cancelada:"bg-red-100 text-red-700",entregada:"bg-blue-100 text-blue-700"},d=[{value:"idPedido",label:"ID Pedido"},{value:"estado",label:"Estado"},{value:"fechaEntrega",label:"Fecha de Entrega"},{value:"fechaPedido",label:"Fecha de Pedido"},{value:"idCliente",label:"Cliente"}];function i(e){let{pedidos:t}=e,[a,o]=(0,s.useState)("fechaEntrega"),[i,l]=(0,s.useState)(!0),c=(0,s.useMemo)(()=>{let e=[...t];return e.sort((e,t)=>{let n=e[a],s=t[a];return("idPedido"===a&&(n=Number(n),s=Number(s)),("fechaEntrega"===a||"fechaPedido"===a)&&(n=new Date(n).getTime(),s=new Date(s).getTime()),"number"==typeof n&&"number"==typeof s)?i?n-s:s-n:i?String(n).localeCompare(String(s)):String(s).localeCompare(String(n))}),e},[t,a,i]);return(0,n.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Pedidos de Venta"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("label",{htmlFor:"ordenar",className:"text-sm font-medium",children:"Ordenar por:"}),(0,n.jsx)("select",{id:"ordenar",value:a,onChange:e=>o(e.target.value),className:"border rounded px-2 py-1 text-sm",children:d.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,n.jsx)("button",{className:"ml-2 px-2 py-1 rounded bg-neutral-light text-xs",onClick:()=>l(e=>!e),title:"Invertir orden",children:i?"Ascendente ↑":"Descendente ↓"})]}),(0,n.jsx)("div",{className:" mt-6 space-y-4",children:c.map(e=>(0,n.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsxs)("span",{className:"font-bold text-primary",children:["Pedido #",e.idPedido]}),(0,n.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(r[e.estado]||"bg-gray-200 text-gray-700"),children:e.estado.charAt(0).toUpperCase()+e.estado.slice(1)})]}),(0,n.jsxs)("div",{className:"mb-1 text-sm",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Cliente:"})," ",e.idCliente]}),(0,n.jsxs)("div",{className:"mb-1 text-sm",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Fecha Pedido:"})," ",new Date(e.fechaPedido).toLocaleDateString()]}),(0,n.jsxs)("div",{className:"mb-1 text-sm",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Fecha Entrega:"})," ",new Date(e.fechaEntrega).toLocaleDateString()]}),(0,n.jsx)("div",{className:"mb-1 text-sm font-semibold",children:"Productos:"}),(0,n.jsx)("ul",{className:"list-disc pl-5 text-sm",children:e.productos.map(t=>(0,n.jsxs)("li",{children:[t.nombre," ",(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["x",t.cantidad]})]},"".concat(e.idPedido,"-").concat(t.idProducto)))})]},e.idPedido))})]})}let l=()=>{let[e,t]=(0,s.useState)([]);return(0,s.useEffect)(()=>{!async function(){let e=await (0,o.X6)();t(e),console.log(e)}()},[]),(0,n.jsx)("div",{className:"min-h-screen bg-neutral-light p-6 space-y-6",children:(0,n.jsx)(i,{pedidos:e})})}},5647:(e,t,a)=>{Promise.resolve().then(a.bind(a,5055))},8569:(e,t,a)=>{"use strict";a.d(t,{NV:()=>r,OV:()=>d,X6:()=>s,lm:()=>o});let n="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function s(){let e=await fetch("".concat(n,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");return(await e.json()).data}async function o(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(n,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function r(){let e=await fetch("".concat(n,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function d(e,t){let a=await fetch("".concat(n,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!a.ok){let e=await a.json();throw Error("Error updating estado: ".concat(a.status," - ").concat(JSON.stringify(e)))}return a.json()}}},e=>{e.O(0,[441,255,358],()=>e(e.s=5647)),_N_E=e.O()}]);