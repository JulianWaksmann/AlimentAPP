(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3949],{28569:(e,t,o)=>{"use strict";o.d(t,{$1:()=>l,A1:()=>u,LP:()=>p,NV:()=>s,OV:()=>r,Ob:()=>g,Sr:()=>h,UE:()=>m,X6:()=>n,dC:()=>c,gq:()=>f,lm:()=>i,s1:()=>d});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function n(){let e=await fetch("".concat(a,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let t=await e.json();return console.log(t),t.data}async function i(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(a,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function s(){let e=await fetch("".concat(a,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function r(e,t){let o=await fetch("".concat(a,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!o.ok){let e=await o.json();throw Error("Error updating estado: ".concat(o.status," - ").concat(JSON.stringify(e)))}return o.json()}async function c(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-lista-con-envio"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos terminados");let t=await e.json();return console.log("Pedidos Terminados Data:",t.pedidos),t.pedidos}async function d(e){let t=await fetch("".concat(a,"/gestion-envios/post-get-envios-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:e})});if(!t.ok)throw Error("Error fetching pedidos asignados");let o=await t.json();return console.log("Response Data:",o),o.vehiculos}async function l(e){let t=await fetch("".concat(a,"/gestion-envios/post-update-despachar-all-envios-de-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_vehiculo:e})});if(!t.ok){let e=await t.json();throw Error("Error updating estado envio: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function h(e,t){let o={id_envio:e,estado:t};console.log(JSON.stringify(o));let n=await fetch("".concat(a,"/gestion-envios/post-update-estado-envio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!n.ok){let e=await n.json();throw Error("Error updating estado envio: ".concat(n.status," - ").concat(JSON.stringify(e)))}return n.json()}async function p(){let e=await fetch("".concat(a,"/crear-orden-venta/get-orden-venta-atrasada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Failed to fetch pedidos reprogramados:",e.statusText),Error("Error fetching pedidos reprogramados");return await e.json()}async function f(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-en-supervision-por-urgencia"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos urgentes");return(await e.json()).orden_ventas_pendiente_supervision_urgencia}async function m(e){let t={id_orden_venta:e};console.log(JSON.stringify(t));let o=await fetch("".concat(a,"/get-orden-venta/planificador_ordenes_produccion_simulacion_ov"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw Error("Error fetching ordenes que se retrasan");return(await o.json()).ordenes_afectadas}async function u(e,t){let o=await fetch("".concat(a,"/get-orden-venta/get-detalle-pedido-por-id-y-cuil"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_venta:t,cuil:e})}),n=await o.json();if(!o.ok)throw Error(n.error||"Error fetching estado del pedido");return n}async function g(e,t,o,n,i){let s=await fetch("".concat(a,"/crear-direccion/post-obtener-direcciones-normalizadas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_cliente:i,calle:e,numero:t,localidad:o,provincia:n})});if(!s.ok){let e=await s.json();throw Error("Error creating direccion: ".concat(s.status," - ").concat(JSON.stringify(e)))}let r=await s.json();return console.log("Respuesta de crearDireccion en API:",r),r}},73369:(e,t,o)=>{Promise.resolve().then(o.bind(o,90328))},90328:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var a=o(95155),n=o(12115),i=o(28569);let s=()=>{let[e,t]=(0,n.useState)([]),[o,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{!async function(){t(await (0,i.LP)())}()},[]),(0,a.jsxs)("div",{children:[o&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Pedido Cancelado"}),(0,a.jsx)("p",{children:"El pedido ha sido cancelado exitosamente."}),(0,a.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",onClick:()=>s(!1),children:"Cerrar"})]})}),(0,a.jsx)("h1",{className:"text-center text-primary text-2xl font-semibold my-3 ",children:"PEDIDOS REPROGRAMADOS"}),(0,a.jsx)("h4",{className:"text-center text-gray-600",children:"Estos pedidos no se podran entregar en la fecha solicitada, por lo que fueron replanificados para entregar lo antes posible"}),(0,a.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4 text-primary",children:"Pedidos de Venta"}),(0,a.jsx)("div",{className:"",children:(0,a.jsx)("div",{className:" mt-6 space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("span",{className:"font-bold text-primary",children:["Pedido #",e.idpedido]}),(0,a.jsx)("button",{className:"bg-error rounded p-1 text-white",onClick:()=>{!function(e){(0,i.OV)(e,"cancelada"),console.log("Cancelar pedido con ID: ".concat(e))}(e.idpedido),s(!0)},children:"Cancelar Pedido"})]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsxs)("span",{className:"font-semibold",children:["Cliente ",e.idcliente," :"]})," ",e.nombrecliente," ",e.apellidocliente]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha Pedido:"})," ",e.fechaPedido&&new Date(e.fechaPedido).getTime()>0?new Date(e.fechaPedido).toLocaleDateString():"-"]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold text-red-700",children:"Fecha Solicitada:"})," ",e.fechasolicitada&&new Date(e.fechasolicitada).getTime()>0?new Date(e.fechasolicitada).toLocaleDateString():"-"]}),(0,a.jsxs)("div",{className:"mb-1 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold text-green-700",children:"Fecha Nueva Entrega:"})," ",e.fechaplanificada&&new Date(e.fechaplanificada).getTime()>0?new Date(e.fechaplanificada).toLocaleDateString():"-"]}),(0,a.jsx)("div",{className:"mb-1 text-sm font-semibold",children:"Productos:"}),(0,a.jsx)("ul",{className:"list-disc pl-5 text-sm",children:e.productos.map(t=>(0,a.jsxs)("li",{children:[t.nombre," ",(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["x",t.cantidad]})]},"".concat(e.idpedido,"-").concat(t.idProducto)))}),(0,a.jsxs)("div",{className:"mt-2 text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Valor Total:"})," $",e.valorpedido]})]},e.idpedido))})})]})]})}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=73369)),_N_E=e.O()}]);