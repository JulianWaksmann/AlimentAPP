(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3284],{15239:(e,r,t)=>{"use strict";t.d(r,{default:()=>o.a});var a=t(54652),o=t.n(a)},20063:(e,r,t)=>{"use strict";var a=t(47260);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},51730:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});var a=t(95155);t(12115);var o=t(20063),n=t(84926),s=t(15239);let d=()=>{let e=(0,o.useRouter)();return(0,a.jsxs)("header",{className:"relative flex items-center justify-center py-3 text-center text-white",children:[(0,a.jsx)(s.default,{src:"/Banner.jpg",alt:"Banner",fill:!0,priority:!0,className:"object-cover "}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,a.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,a.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,a.jsx)(n.A,{size:16}),(0,a.jsx)("span",{})]})]})}},54652:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return l},getImageProps:function(){return d}});let a=t(28140),o=t(75040),n=t(81356),s=a._(t(71124));function d(e){let{props:r}=(0,o.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let l=n.Image},62386:(e,r,t)=>{"use strict";t.d(r,{DW:()=>s,Lm:()=>o,Qw:()=>d,Sr:()=>l,Um:()=>u,Un:()=>i,Ym:()=>c,wq:()=>n});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function o(e){let r=await fetch("".concat(a,"/gestion-vehiculos/post-registrar-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error((await r.json()).error||"Error al crear la flota");return r.json()}async function n(){let e=await fetch("".concat(a,"/gestion-vehiculos/get-vehiculos-disponibles"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching flotas");let r=await e.json();return Array.isArray(r.vehiculos)?r.vehiculos:[]}async function s(e){let r={id_vehiculo:e.id_vehiculo,ordenes_venta:e.ids_pedidos.map(e=>({id_orden_venta:e}))},t=await fetch("".concat(a,"/gestion-envios/post-crear-tanda-envios"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok)throw Error((await t.json()).error||"Error al crear el envio");return t.json()}async function d(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-lista"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos para retiro");let r=await e.json();return Array.isArray(r.pedidos)?r.pedidos:[]}async function l(e){let r=await fetch("".concat(a,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:"entregada"})});if(!r.ok)throw Error((await r.json()).error||"Error al marcar el pedido como entregado");return r.json()}async function i(e,r){let t=await fetch("".concat(a,"/gestion-envios/post-obtener-envios-por-estado-y-conductor"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dni_conductor:e,estado_envio:r})});if(!t.ok)throw Error("Error fetching pedidos para retiro");return(await t.json()).vehiculo[0]}async function c(e,r){let t=await fetch("".concat(a,"/gestion-envios/post-entregar-envio-por-dni"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dni_cliente:e,id_envio:r})});if(!t.ok)throw console.log("Error en la respuesta de verificarEntrega"),Error((await t.json()).error||"Error al verificar la entrega");return t.json()}async function u(e){let r=await fetch("".concat(a,"/gestion-envios/post-get-camino-optimo-por-conductor"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dni_conductor:e})}),t=await r.json();return console.log("respuesta ordenes: "+t),t}},71847:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(12115);let o=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},n=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:l,className:i="",children:c,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:r,...s,width:o,height:o,stroke:t,strokeWidth:l?24*Number(d)/Number(o):d,className:n("lucide",i),...!c&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),l=(e,r)=>{let t=(0,a.forwardRef)((t,s)=>{let{className:l,...i}=t;return(0,a.createElement)(d,{ref:s,iconNode:r,className:n("lucide-".concat(o(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...i})});return t.displayName=o(e),t}},72456:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var a=t(95155),o=t(51730),n=t(12115),s=t(62386);let d=e=>{let{flotas:r}=e;return(0,a.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"ID"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Modelo"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Patente"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Capacidad"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Nombre conductor"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"DNI"}),(0,a.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Empresa"})]})}),(0,a.jsx)("tbody",{children:r.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.id}),(0,a.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[e.tipo_unidad,"-",e.modelo]}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.patente}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.capacidad_kg}),(0,a.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[e.nombre_conductor," ",e.apellido_conductor]}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.dni_conductor}),(0,a.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.empresa})]},e.id))})]})})},l=()=>{let[e,r]=(0,n.useState)(!1),[t,l]=(0,n.useState)([]),[i,c]=(0,n.useState)([]),[u,m]=(0,n.useState)({nombre_conductor:"",apellido_conductor:"",dni_conductor:"",empresa:"",tipo_unidad:"",patente:"",modelo:"",capacidad_kg:"",color:""}),[p,h]=(0,n.useState)(!1),[b,x]=(0,n.useState)(null),g=e=>{let{name:r,value:t}=e.target;m(e=>({...e,[r]:t}))},y=async e=>{e.preventDefault(),x(null),h(!0);try{let e={nombre_conductor:u.nombre_conductor,apellido_conductor:u.apellido_conductor,dni_conductor:u.dni_conductor,empresa:u.empresa,tipo_unidad:u.tipo_unidad,patente:u.patente,modelo:u.modelo,capacidad_kg:Number(u.capacidad_kg),color:u.color};await (0,s.Lm)(e),c(r=>[...r,e]),r(!1),m({nombre_conductor:"",apellido_conductor:"",dni_conductor:"",empresa:"",tipo_unidad:"",patente:"",modelo:"",capacidad_kg:"",color:""}),f()}catch(e){x(e instanceof Error?e.message:"Error al crear la unidad")}finally{h(!1)}};async function f(){l(await (0,s.wq)())}return(0,n.useEffect)(()=>{f()},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.default,{}),(0,a.jsxs)("div",{className:"text-lg font-bold mb-2 p-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center mb-4 text-primary",children:"Gesti\xf3n de Flotas"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark transition",onClick:()=>r(!0),children:"Agregar Nueva Unidad"}),(0,a.jsx)(d,{flotas:t}),e&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg ",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Formulario de Nueva Unidad"}),(0,a.jsxs)("form",{onSubmit:y,children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 justify-center gap-4",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre"}),(0,a.jsx)("input",{type:"text",name:"nombre_conductor",value:u.nombre_conductor,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el nombre"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Apellido"}),(0,a.jsx)("input",{type:"text",name:"apellido_conductor",value:u.apellido_conductor,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el apellido"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"DNI del conductor"}),(0,a.jsx)("input",{type:"text",name:"dni_conductor",value:u.dni_conductor,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el DNI"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Empresa"}),(0,a.jsx)("input",{type:"text",name:"empresa",value:u.empresa,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Nombre de empresa"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Unidad"}),(0,a.jsxs)("select",{name:"tipo_unidad",value:u.tipo_unidad,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"Selecciona un tipo"}),(0,a.jsx)("option",{value:"camion",children:"Cami\xf3n"}),(0,a.jsx)("option",{value:"camioneta",children:"Camioneta"}),(0,a.jsx)("option",{value:"auto",children:"Auto"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Placa"}),(0,a.jsx)("input",{type:"text",name:"patente",value:u.patente,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese la placa"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Modelo"}),(0,a.jsx)("input",{type:"text",name:"modelo",value:u.modelo,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el modelo"})]}),(0,a.jsxs)("div",{className:"mb-4 grid grid-cols-2 ",children:[(0,a.jsxs)("div",{className:"mb-4 mr-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Capacidad"}),(0,a.jsx)("input",{type:"number",name:"capacidad_kg",value:u.capacidad_kg,onChange:g,required:!0,min:1,className:"w-full border rounded px-3 py-2",placeholder:"Capacidad en KG"})]}),(0,a.jsxs)("div",{className:"mb-4 mr-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Color"}),(0,a.jsx)("input",{type:"text",name:"color",value:u.color,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el color"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-4",children:[(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 mt-4 bg-success text-white rounded hover:bg-primary-dark transition disabled:opacity-50",disabled:p,children:p?"Guardando...":"Guardar"}),(0,a.jsx)("button",{type:"button",onClick:()=>r(!1),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition",children:"Cerrar"})]}),b&&(0,a.jsx)("div",{className:"mt-4 p-2 bg-red-100 text-red-700 rounded",children:b})]})]})})]})]})}},84926:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},88122:(e,r,t)=>{Promise.resolve().then(t.bind(t,72456))}},e=>{e.O(0,[1356,8441,1255,7358],()=>e(e.s=88122)),_N_E=e.O()}]);