(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7710],{15239:(e,t,r)=>{"use strict";r.d(t,{default:()=>o.a});var a=r(54652),o=r.n(a)},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},28569:(e,t,r)=>{"use strict";r.d(t,{$1:()=>l,A1:()=>g,LP:()=>p,NV:()=>s,OV:()=>i,Ob:()=>m,Sr:()=>u,UE:()=>f,X6:()=>o,dC:()=>d,gq:()=>h,lm:()=>n,s1:()=>c});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function o(){let e=await fetch("".concat(a,"/crear-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");return(await e.json()).data}async function n(e){console.log("Creando nuevo pedido con data:",e);let t=await fetch("".concat(a,"/crear-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log(JSON.stringify(e)),!t.ok){let e=await t.json();throw Error("Error creating pedido: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function s(){let e=await fetch("".concat(a,"/get-orden-venta"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching solicitudes de venta");return(await e.json()).orden_ventas_pendientes}async function i(e,t){let r=await fetch("".concat(a,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:t})});if(!r.ok){let e=await r.json();throw Error("Error updating estado: ".concat(r.status," - ").concat(JSON.stringify(e)))}return r.json()}async function d(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-lista-con-envio"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos terminados");let t=await e.json();return console.log("Pedidos Terminados Data:",t.pedidos),t.pedidos}async function c(e){let t=await fetch("".concat(a,"/gestion-envios/post-get-envios-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:e})});if(!t.ok)throw Error("Error fetching pedidos asignados");let r=await t.json();return console.log("Response Data:",r),r.vehiculos}async function l(e){let t=await fetch("".concat(a,"/gestion-envios/post-update-despachar-all-envios-de-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_vehiculo:e})});if(!t.ok){let e=await t.json();throw Error("Error updating estado envio: ".concat(t.status," - ").concat(JSON.stringify(e)))}return t.json()}async function u(e,t){let r={id_envio:e,estado:t};console.log(JSON.stringify(r));let o=await fetch("".concat(a,"/gestion-envios/post-update-estado-envio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){let e=await o.json();throw Error("Error updating estado envio: ".concat(o.status," - ").concat(JSON.stringify(e)))}return o.json()}async function p(){let e=await fetch("".concat(a,"/crear-orden-venta/get-orden-venta-atrasada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw console.error("Failed to fetch pedidos reprogramados:",e.statusText),Error("Error fetching pedidos reprogramados");return await e.json()}async function h(){let e=await fetch("".concat(a,"/get-orden-venta/get-orden-venta-en-supervision-por-urgencia"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos urgentes");return(await e.json()).orden_ventas_pendiente_supervision_urgencia}async function f(e){let t={id_orden_venta:e};console.log(JSON.stringify(t));let r=await fetch("".concat(a,"/get-orden-venta/planificador_ordenes_produccion_simulacion_ov"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Error fetching ordenes que se retrasan");return(await r.json()).ordenes_afectadas}async function g(e,t){let r=await fetch("".concat(a,"/get-orden-venta/get-detalle-pedido-por-id-y-cuil"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_venta:t,cuil:e})}),o=await r.json();if(!r.ok)throw Error(o.error||"Error fetching estado del pedido");return o}async function m(e,t,r,o,n){let s=await fetch("".concat(a,"/crear-direccion/post-obtener-direcciones-normalizadas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_cliente:n,calle:e,numero:t,localidad:r,provincia:o})});if(!s.ok){let e=await s.json();throw Error("Error creating direccion: ".concat(s.status," - ").concat(JSON.stringify(e)))}let i=await s.json();return console.log("Respuesta de crearDireccion en API:",i),i}},5e4:(e,t,r)=>{Promise.resolve().then(r.bind(r,65109))},51730:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(95155);r(12115);var o=r(20063),n=r(84926),s=r(15239);let i=()=>{let e=(0,o.useRouter)();return(0,a.jsxs)("header",{className:"relative flex items-center justify-center py-3 text-center text-white",children:[(0,a.jsx)(s.default,{src:"/Banner.jpg",alt:"Banner",fill:!0,priority:!0,className:"object-cover "}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,a.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,a.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,a.jsx)(n.A,{size:16}),(0,a.jsx)("span",{})]})]})}},54652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return d},getImageProps:function(){return i}});let a=r(28140),o=r(75040),n=r(81356),s=a._(r(71124));function i(e){let{props:t}=(0,o.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let d=n.Image},65109:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(95155),o=r(12115),n=r(28569),s=r(51730);let i=()=>{let[e,t]=(0,o.useState)([]),[r,i]=(0,o.useState)(!0),[d,c]=(0,o.useState)(null),l=(0,o.useCallback)(async()=>{i(!0),c(null);try{let e=await (0,n.s1)("pendiente");t(e||[])}catch(e){c("Error al cargar los pedidos asignados. Intente de nuevo."),console.error(e)}finally{i(!1)}},[]);(0,o.useEffect)(()=>{l()},[l]);let u=async e=>{try{await (0,n.$1)(e),await l()}catch(e){c("Error al actualizar el estado del env\xedo. Intente de nuevo."),console.error(e)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)(s.default,{}),(0,a.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Pedidos Asignados para Despacho"}),r&&(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Cargando..."}),d&&(0,a.jsx)("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded-md",children:d}),!r&&!d&&0===e.length&&(0,a.jsx)("p",{className:"text-center text-gray-600 mt-8",children:"No hay pedidos asignados pendientes de despacho."}),(0,a.jsx)("div",{className:"space-y-8",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gray-800 text-white p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-xl font-bold",children:[e.modelo," - ",e.patente]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:[e.nombre_conductor," ",e.apellido_conductor]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["DNI: ",e.dni_conductor]}),(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:["Empresa: ",e.empresa]})]}),(0,a.jsx)("button",{onClick:()=>u(e.id_vehiculo),className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 disabled:opacity-50",disabled:!e.id_vehiculo,children:"DESPACHAR"})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Pedidos en este env\xedo:"}),e.envios.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-800",children:["Pedido #",e.id_orden_venta," - ",e.razon_social]}),(0,a.jsxs)("p",{className:"text-m text-green-900",children:["Valor total: $",e.valor_total_pedido.toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Fecha de entrega solicitada: ",e.fecha_entrega_solicitada]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Email: ",e.email]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Tel\xe9fono: ",e.telefono]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Peso: ",e.peso_total_pedido," kg"]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700",children:"Productos:"}),(0,a.jsx)("ul",{className:"list-disc list-inside",children:e.productos.map(e=>(0,a.jsxs)("li",{className:"text-sm text-gray-600",children:[e.nombre," - Bultos: ",e.cantidad]},e.id))})]})]},e.id_orden_venta))]})]},e.id_vehiculo))})]})]})}},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(12115);let o=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:c="",children:l,iconNode:u,...p}=e;return(0,a.createElement)("svg",{ref:t,...s,width:o,height:o,stroke:r,strokeWidth:d?24*Number(i)/Number(o):i,className:n("lucide",c),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(l)?l:[l]])}),d=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:d,...c}=r;return(0,a.createElement)(i,{ref:s,iconNode:t,className:n("lucide-".concat(o(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return r.displayName=o(e),r}},84926:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])}},e=>{e.O(0,[1356,8441,1255,7358],()=>e(e.s=5e4)),_N_E=e.O()}]);