(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2128],{15239:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var o=r(54652),a=r.n(o)},20063:(e,t,r)=>{"use strict";var o=r(47260);r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}})},51730:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var o=r(95155);r(12115);var a=r(20063),n=r(84926),s=r(15239);let i=()=>{let e=(0,a.useRouter)();return(0,o.jsxs)("header",{className:"relative flex items-center justify-center py-3 text-center text-white",children:[(0,o.jsx)(s.default,{src:"/Banner.jpg",alt:"Banner",fill:!0,priority:!0,className:"object-cover "}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,o.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,o.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,o.jsx)(n.A,{size:16}),(0,o.jsx)("span",{})]})]})}},54652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return i}});let o=r(28140),a=r(75040),n=r(81356),s=o._(r(71124));function i(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=n.Image},62386:(e,t,r)=>{"use strict";r.d(t,{DW:()=>s,Lm:()=>a,Qw:()=>i,Sr:()=>l,Um:()=>h,Un:()=>d,Ym:()=>c,wq:()=>n});let o="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function a(e){let t=await fetch("".concat(o,"/gestion-vehiculos/post-registrar-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Error al crear la flota");return t.json()}async function n(){let e=await fetch("".concat(o,"/gestion-vehiculos/get-vehiculos-disponibles"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching flotas");let t=await e.json();return Array.isArray(t.vehiculos)?t.vehiculos:[]}async function s(e){let t={id_vehiculo:e.id_vehiculo,ordenes_venta:e.ids_pedidos.map(e=>({id_orden_venta:e}))},r=await fetch("".concat(o,"/gestion-envios/post-crear-tanda-envios"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error((await r.json()).error||"Error al crear el envio");return r.json()}async function i(){let e=await fetch("".concat(o,"/get-orden-venta/get-orden-venta-lista"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching pedidos para retiro");let t=await e.json();return Array.isArray(t.pedidos)?t.pedidos:[]}async function l(e){let t=await fetch("".concat(o,"/crear-orden-venta/update-estado-orden-venta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_pedido:e,estado:"entregada"})});if(!t.ok)throw Error((await t.json()).error||"Error al marcar el pedido como entregado");return t.json()}async function d(e,t){let r={dni_conductor:e,estado_envio:t};console.log(JSON.stringify(r));let a=await fetch("".concat(o,"/gestion-envios/post-obtener-envios-por-estado-y-conductor"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("Error fetching pedidos para retiro");return(await a.json()).vehiculo[0]}async function c(e,t){let r=await fetch("".concat(o,"/gestion-envios/post-entregar-envio-por-dni"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dni_cliente:e,id_envio:t})});if(!r.ok)throw console.log("Error en la respuesta de verificarEntrega"),Error((await r.json()).error||"Error al verificar la entrega");return r.json()}async function h(e){let t=await fetch("".concat(o,"/gestion-envios/post-get-camino-optimo-por-conductor"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dni_conductor:e})});if(!t.ok)throw Error("Error fetching recorrido del conductor");let r=await t.json();return console.log(r),r}},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(12115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,o.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:c,iconNode:h,...u}=e;return(0,o.createElement)("svg",{ref:t,...s,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:n("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),l=(e,t)=>{let r=(0,o.forwardRef)((r,s)=>{let{className:l,...d}=r;return(0,o.createElement)(i,{ref:s,iconNode:t,className:n("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...d})});return r.displayName=a(e),r}},77734:(e,t,r)=>{Promise.resolve().then(r.bind(r,85373))},84926:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},85373:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var o=r(95155),a=r(51730),n=r(12115),s=r(62386);let i=()=>{let[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(!1),[l,d]=(0,n.useState)(null);async function c(){await (0,s.Sr)(l),window.location.reload()}return(0,n.useEffect)(()=>{!async function(){try{let e=await (0,s.Qw)();console.log(e),t(e||[])}catch(e){console.error("Error al cargar los pedidos para retiro:",e)}}()},[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(a.default,{}),(0,o.jsx)("h1",{className:"text-center text-primary text-3xl my-2 font-semibold",children:"Pedidos Para Retiro"}),(0,o.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:0===e.length?(0,o.jsx)("p",{className:"text-center",children:"No hay pedidos para retiro disponibles."}):(0,o.jsx)("div",{className:"grid gap-6",children:e.map(e=>(0,o.jsxs)("div",{className:"border p-4 rounded-lg shadow-sm bg-white",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold mb-1",children:["Pedido ID: ",e.id_pedido_venta]}),(0,o.jsx)("button",{className:"rounded bg-details p-2 ",onClick:()=>{i(!0),d(e.id_pedido_venta)},children:"Marcar Entrega"})]}),(0,o.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.razon_social}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Contacto:"})," ",e.nombre_contacto," ",e.apellido_contacto]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Tel\xe9fono:"})," ",e.telefono]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Fecha de Pedido:"})," ",new Date(e.fecha_pedido).toLocaleDateString()]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Fecha Entrega Solicitada:"})," ",new Date(e.fecha_entrega_solicitada).toLocaleDateString()]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Valor Total del Pedido:"})," $",e.valor_total_pedido]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Peso Total del Pedido:"})," ",e.peso_total_kg," kg"]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("h3",{className:"font-semibold mb-2",children:"Productos:"}),(0,o.jsx)("ul",{className:"list-disc list-inside",children:e.productos.map(e=>(0,o.jsxs)("li",{children:[e.nombre_producto," - Cantidad: ",e.cantidad]},e.id_producto))})]})]},e.id_pedido_venta))})}),r&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Confirmar Entrega"}),(0,o.jsxs)("p",{className:"mb-4",children:["\xbfEst\xe1s seguro que deseas marcar el pedido #",l," como entregado?"]}),(0,o.jsxs)("div",{className:"flex justify-end",children:[(0,o.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded-lg mr-2",onClick:()=>i(!1),children:"Cancelar"}),(0,o.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg",onClick:()=>{c(),i(!1)},children:"Confirmar"})]})]})})]})}}},e=>{e.O(0,[1356,8441,1255,7358],()=>e(e.s=77734)),_N_E=e.O()}]);