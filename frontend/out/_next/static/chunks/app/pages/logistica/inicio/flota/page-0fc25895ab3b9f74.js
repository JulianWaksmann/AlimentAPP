(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3284],{20063:(e,r,a)=>{"use strict";var t=a(47260);a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}})},51730:(e,r,a)=>{"use strict";a.d(r,{default:()=>l});var t=a(95155);a(12115);var s=a(20063),o=a(84926);let l=()=>{let e=(0,s.useRouter)();return(0,t.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center relative flex items-center justify-center",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,t.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,t.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,t.jsx)(o.A,{size:16}),(0,t.jsx)("span",{children:"Salir"})]})]})}},62386:(e,r,a)=>{"use strict";a.d(r,{DW:()=>l,Lm:()=>s,wq:()=>o});let t="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function s(e){let r=await fetch("".concat(t,"/gestion-vehiculos/post-registrar-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error((await r.json()).error||"Error al crear la flota");return r.json()}async function o(){let e=await fetch("".concat(t,"/gestion-vehiculos/get-vehiculos-disponibles"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching flotas");let r=await e.json();return Array.isArray(r.vehiculos)?r.vehiculos:[]}async function l(e){let r={id_vehiculo:e.id_vehiculo,ordenes_venta:e.ids_pedidos.map(e=>({id_orden_venta:e}))},a=await fetch("".concat(t,"/gestion-envios/post-crear-tanda-envios"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error((await a.json()).error||"Error al crear el envio");return a.json()}},71847:(e,r,a)=>{"use strict";a.d(r,{A:()=>n});var t=a(12115);let s=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},o=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,t.forwardRef)((e,r)=>{let{color:a="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:n,className:i="",children:c,iconNode:m,...u}=e;return(0,t.createElement)("svg",{ref:r,...l,width:s,height:s,stroke:a,strokeWidth:n?24*Number(d)/Number(s):d,className:o("lucide",i),...!c&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(c)?c:[c]])}),n=(e,r)=>{let a=(0,t.forwardRef)((a,l)=>{let{className:n,...i}=a;return(0,t.createElement)(d,{ref:l,iconNode:r,className:o("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...i})});return a.displayName=s(e),a}},72456:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>n});var t=a(95155),s=a(51730),o=a(12115),l=a(62386);let d=e=>{let{flotas:r}=e;return(0,t.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,t.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"ID"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Modelo"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Patente"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Capacidad"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Nombre conductor"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"DNI"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Empresa"})]})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.id}),(0,t.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[e.tipo_unidad,"-",e.modelo]}),(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.patente}),(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.capacidad_kg}),(0,t.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[e.nombre_conductor," ",e.apellido_conductor]}),(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.dni_conductor}),(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.empresa})]},e.id))})]})})},n=()=>{let[e,r]=(0,o.useState)(!1),[a,n]=(0,o.useState)([]),[i,c]=(0,o.useState)([]),[m,u]=(0,o.useState)({nombre_conductor:"",apellido_conductor:"",dni_conductor:"",empresa:"",tipo_unidad:"",patente:"",modelo:"",capacidad_kg:"",color:""}),[p,b]=(0,o.useState)(!1),[h,x]=(0,o.useState)(null),g=e=>{let{name:r,value:a}=e.target;u(e=>({...e,[r]:a}))},y=async e=>{e.preventDefault(),x(null),b(!0);try{let e={nombre_conductor:m.nombre_conductor,apellido_conductor:m.apellido_conductor,dni_conductor:m.dni_conductor,empresa:m.empresa,tipo_unidad:m.tipo_unidad,patente:m.patente,modelo:m.modelo,capacidad_kg:Number(m.capacidad_kg),color:m.color};await (0,l.Lm)(e),c(r=>[...r,e]),r(!1),u({nombre_conductor:"",apellido_conductor:"",dni_conductor:"",empresa:"",tipo_unidad:"",patente:"",modelo:"",capacidad_kg:"",color:""}),j()}catch(e){x(e instanceof Error?e.message:"Error al crear la unidad")}finally{b(!1)}};async function j(){n(await (0,l.wq)())}return(0,o.useEffect)(()=>{j()},[]),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.default,{}),(0,t.jsxs)("div",{className:"text-lg font-bold mb-2 p-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-center mb-4 text-primary",children:"Gesti\xf3n de Flotas"}),(0,t.jsx)("button",{className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark transition",onClick:()=>r(!0),children:"Agregar Nueva Unidad"}),(0,t.jsx)(d,{flotas:a}),e&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg ",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Formulario de Nueva Unidad"}),(0,t.jsxs)("form",{onSubmit:y,children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 justify-center gap-4",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre"}),(0,t.jsx)("input",{type:"text",name:"nombre_conductor",value:m.nombre_conductor,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el nombre"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Apellido"}),(0,t.jsx)("input",{type:"text",name:"apellido_conductor",value:m.apellido_conductor,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el apellido"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"DNI del conductor"}),(0,t.jsx)("input",{type:"text",name:"dni_conductor",value:m.dni_conductor,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el DNI"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Empresa"}),(0,t.jsx)("input",{type:"text",name:"empresa",value:m.empresa,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Nombre de empresa"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Unidad"}),(0,t.jsxs)("select",{name:"tipo_unidad",value:m.tipo_unidad,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",children:[(0,t.jsx)("option",{value:"",children:"Selecciona un tipo"}),(0,t.jsx)("option",{value:"camion",children:"Cami\xf3n"}),(0,t.jsx)("option",{value:"camioneta",children:"Camioneta"}),(0,t.jsx)("option",{value:"auto",children:"Auto"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Placa"}),(0,t.jsx)("input",{type:"text",name:"patente",value:m.patente,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese la placa"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Modelo"}),(0,t.jsx)("input",{type:"text",name:"modelo",value:m.modelo,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el modelo"})]}),(0,t.jsxs)("div",{className:"mb-4 grid grid-cols-2 ",children:[(0,t.jsxs)("div",{className:"mb-4 mr-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Capacidad"}),(0,t.jsx)("input",{type:"number",name:"capacidad_kg",value:m.capacidad_kg,onChange:g,required:!0,min:1,className:"w-full border rounded px-3 py-2",placeholder:"Capacidad en KG"})]}),(0,t.jsxs)("div",{className:"mb-4 mr-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Color"}),(0,t.jsx)("input",{type:"text",name:"color",value:m.color,onChange:g,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el color"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex justify-end gap-4",children:[(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 mt-4 bg-success text-white rounded hover:bg-primary-dark transition disabled:opacity-50",disabled:p,children:p?"Guardando...":"Guardar"}),(0,t.jsx)("button",{type:"button",onClick:()=>r(!1),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition",children:"Cerrar"})]}),h&&(0,t.jsx)("div",{className:"mt-4 p-2 bg-red-100 text-red-700 rounded",children:h})]})]})})]})]})}},84926:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},88122:(e,r,a)=>{Promise.resolve().then(a.bind(a,72456))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=88122)),_N_E=e.O()}]);