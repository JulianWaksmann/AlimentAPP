(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3284],{51730:(e,r,a)=>{"use strict";a.d(r,{A:()=>l});var d=a(95155);a(12115);let l=()=>(0,d.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,d.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,d.jsx)("h4",{children:"Gestion de Empresas"})]})},62147:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>i});var d=a(95155),l=a(51730),s=a(12115);let t="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function o(e){let r=await fetch("".concat(t,"/gestion-vehiculos/post-registrar-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error((await r.json()).error||"Error al crear la flota");return r.json()}async function n(){let e=await fetch("".concat(t,"/gestion-vehiculos/get-vehiculos-disponibles"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching flotas");let r=await e.json();return console.log(r.flotas),Array.isArray(r.vehiculos)?r.vehiculos:[]}let c=e=>{let{flotas:r}=e;return(0,d.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,d.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"ID"}),(0,d.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Modelo"}),(0,d.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Patente"}),(0,d.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Capacidad"}),(0,d.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Nombre conductor"}),(0,d.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"DNI"}),(0,d.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Empresa"})]})}),(0,d.jsx)("tbody",{children:r.map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.id}),(0,d.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[e.tipo_unidad,"-",e.modelo]}),(0,d.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.patente}),(0,d.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.capacidad_kg}),(0,d.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[e.nombre_conductor," ",e.apellido_conductor]}),(0,d.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.dni_conductor}),(0,d.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.empresa})]},e.id))})]})})},i=()=>{let[e,r]=(0,s.useState)(!1),[a,t]=(0,s.useState)([]),[i,m]=(0,s.useState)([]),[p,u]=(0,s.useState)({nombre_conductor:"",apellido_conductor:"",dni_conductor:"",empresa:"",tipo_unidad:"",patente:"",modelo:"",capacidad_kg:"",color:""}),[b,x]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),y=e=>{let{name:r,value:a}=e.target;u(e=>({...e,[r]:a}))},j=async e=>{e.preventDefault(),g(null),x(!0);try{let e={nombre_conductor:p.nombre_conductor,apellido_conductor:p.apellido_conductor,dni_conductor:p.dni_conductor,empresa:p.empresa,tipo_unidad:p.tipo_unidad,patente:p.patente,modelo:p.modelo,capacidad_kg:Number(p.capacidad_kg),color:p.color};await o(e),m(r=>[...r,e]),r(!1),u({nombre_conductor:"",apellido_conductor:"",dni_conductor:"",empresa:"",tipo_unidad:"",patente:"",modelo:"",capacidad_kg:"",color:""}),N()}catch(e){g(e instanceof Error?e.message:"Error al crear la unidad")}finally{x(!1)}};async function N(){t(await n())}return(0,s.useEffect)(()=>{N()},[]),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.A,{}),(0,d.jsxs)("div",{className:"text-lg font-bold mb-2 p-4",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-center mb-4 text-primary",children:"Gesti\xf3n de Flotas"}),(0,d.jsx)("button",{className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark transition",onClick:()=>r(!0),children:"Agregar Nueva Unidad"}),(0,d.jsx)(c,{flotas:a}),e&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg ",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Formulario de Nueva Unidad"}),(0,d.jsxs)("form",{onSubmit:j,children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 justify-center gap-4",children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre"}),(0,d.jsx)("input",{type:"text",name:"nombre_conductor",value:p.nombre_conductor,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el nombre"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Apellido"}),(0,d.jsx)("input",{type:"text",name:"apellido_conductor",value:p.apellido_conductor,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el apellido"})]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"DNI del conductor"}),(0,d.jsx)("input",{type:"text",name:"dni_conductor",value:p.dni_conductor,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el DNI"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Empresa"}),(0,d.jsx)("input",{type:"text",name:"empresa",value:p.empresa,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Nombre de empresa"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Unidad"}),(0,d.jsxs)("select",{name:"tipo_unidad",value:p.tipo_unidad,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",children:[(0,d.jsx)("option",{value:"",children:"Selecciona un tipo"}),(0,d.jsx)("option",{value:"camion",children:"Cami\xf3n"}),(0,d.jsx)("option",{value:"camioneta",children:"Camioneta"}),(0,d.jsx)("option",{value:"auto",children:"Auto"})]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Placa"}),(0,d.jsx)("input",{type:"text",name:"patente",value:p.patente,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese la placa"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Modelo"}),(0,d.jsx)("input",{type:"text",name:"modelo",value:p.modelo,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el modelo"})]}),(0,d.jsxs)("div",{className:"mb-4 grid grid-cols-2 ",children:[(0,d.jsxs)("div",{className:"mb-4 mr-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Capacidad"}),(0,d.jsx)("input",{type:"number",name:"capacidad_kg",value:p.capacidad_kg,onChange:y,required:!0,min:1,className:"w-full border rounded px-3 py-2",placeholder:"Capacidad en KG"})]}),(0,d.jsxs)("div",{className:"mb-4 mr-2",children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Color"}),(0,d.jsx)("input",{type:"text",name:"color",value:p.color,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el color"})]})]}),(0,d.jsxs)("div",{className:"mt-4 flex justify-end gap-4",children:[(0,d.jsx)("button",{type:"submit",className:"px-4 py-2 mt-4 bg-success text-white rounded hover:bg-primary-dark transition disabled:opacity-50",disabled:b,children:b?"Guardando...":"Guardar"}),(0,d.jsx)("button",{type:"button",onClick:()=>r(!1),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition",children:"Cerrar"})]}),h&&(0,d.jsx)("div",{className:"mt-4 p-2 bg-red-100 text-red-700 rounded",children:h})]})]})})]})]})}},88122:(e,r,a)=>{Promise.resolve().then(a.bind(a,62147))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=88122)),_N_E=e.O()}]);