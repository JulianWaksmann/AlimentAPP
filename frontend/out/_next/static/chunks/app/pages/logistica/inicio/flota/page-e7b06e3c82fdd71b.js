(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3284],{20063:(e,r,a)=>{"use strict";var t=a(47260);a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}})},51730:(e,r,a)=>{"use strict";a.d(r,{default:()=>o});var t=a(95155);a(12115);var s=a(20063),l=a(84926);let o=()=>{let e=(0,s.useRouter)();return(0,t.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center relative flex items-center justify-center",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,t.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,t.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,t.jsx)(l.A,{size:16}),(0,t.jsx)("span",{children:"Salir"})]})]})}},62147:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>i});var t=a(95155),s=a(51730),l=a(12115);let o="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function d(e){let r=await fetch("".concat(o,"/gestion-vehiculos/post-registrar-vehiculo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error((await r.json()).error||"Error al crear la flota");return r.json()}async function n(){let e=await fetch("".concat(o,"/gestion-vehiculos/get-vehiculos-disponibles"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching flotas");let r=await e.json();return console.log(r.flotas),Array.isArray(r.vehiculos)?r.vehiculos:[]}let c=e=>{let{flotas:r}=e;return(0,t.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,t.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"ID"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Modelo"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Patente"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Capacidad"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Nombre conductor"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"DNI"}),(0,t.jsx)("th",{className:"py-2 px-4 border-b border-gray-200 bg-gray-100 text-left",children:"Empresa"})]})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.id}),(0,t.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[e.tipo_unidad,"-",e.modelo]}),(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.patente}),(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.capacidad_kg}),(0,t.jsxs)("td",{className:"py-2 px-4 border-b border-gray-200",children:[e.nombre_conductor," ",e.apellido_conductor]}),(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.dni_conductor}),(0,t.jsx)("td",{className:"py-2 px-4 border-b border-gray-200",children:e.empresa})]},e.id))})]})})},i=()=>{let[e,r]=(0,l.useState)(!1),[a,o]=(0,l.useState)([]),[i,m]=(0,l.useState)([]),[u,p]=(0,l.useState)({nombre_conductor:"",apellido_conductor:"",dni_conductor:"",empresa:"",tipo_unidad:"",patente:"",modelo:"",capacidad_kg:"",color:""}),[b,x]=(0,l.useState)(!1),[h,g]=(0,l.useState)(null),y=e=>{let{name:r,value:a}=e.target;p(e=>({...e,[r]:a}))},j=async e=>{e.preventDefault(),g(null),x(!0);try{let e={nombre_conductor:u.nombre_conductor,apellido_conductor:u.apellido_conductor,dni_conductor:u.dni_conductor,empresa:u.empresa,tipo_unidad:u.tipo_unidad,patente:u.patente,modelo:u.modelo,capacidad_kg:Number(u.capacidad_kg),color:u.color};await d(e),m(r=>[...r,e]),r(!1),p({nombre_conductor:"",apellido_conductor:"",dni_conductor:"",empresa:"",tipo_unidad:"",patente:"",modelo:"",capacidad_kg:"",color:""}),f()}catch(e){g(e instanceof Error?e.message:"Error al crear la unidad")}finally{x(!1)}};async function f(){o(await n())}return(0,l.useEffect)(()=>{f()},[]),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.default,{}),(0,t.jsxs)("div",{className:"text-lg font-bold mb-2 p-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-center mb-4 text-primary",children:"Gesti\xf3n de Flotas"}),(0,t.jsx)("button",{className:"px-4 py-2 bg-primary text-white rounded hover:bg-primary-dark transition",onClick:()=>r(!0),children:"Agregar Nueva Unidad"}),(0,t.jsx)(c,{flotas:a}),e&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg ",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Formulario de Nueva Unidad"}),(0,t.jsxs)("form",{onSubmit:j,children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 justify-center gap-4",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre"}),(0,t.jsx)("input",{type:"text",name:"nombre_conductor",value:u.nombre_conductor,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el nombre"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Apellido"}),(0,t.jsx)("input",{type:"text",name:"apellido_conductor",value:u.apellido_conductor,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el apellido"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"DNI del conductor"}),(0,t.jsx)("input",{type:"text",name:"dni_conductor",value:u.dni_conductor,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el DNI"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Empresa"}),(0,t.jsx)("input",{type:"text",name:"empresa",value:u.empresa,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Nombre de empresa"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Unidad"}),(0,t.jsxs)("select",{name:"tipo_unidad",value:u.tipo_unidad,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",children:[(0,t.jsx)("option",{value:"",children:"Selecciona un tipo"}),(0,t.jsx)("option",{value:"camion",children:"Cami\xf3n"}),(0,t.jsx)("option",{value:"camioneta",children:"Camioneta"}),(0,t.jsx)("option",{value:"auto",children:"Auto"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Placa"}),(0,t.jsx)("input",{type:"text",name:"patente",value:u.patente,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese la placa"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Modelo"}),(0,t.jsx)("input",{type:"text",name:"modelo",value:u.modelo,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el modelo"})]}),(0,t.jsxs)("div",{className:"mb-4 grid grid-cols-2 ",children:[(0,t.jsxs)("div",{className:"mb-4 mr-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Capacidad"}),(0,t.jsx)("input",{type:"number",name:"capacidad_kg",value:u.capacidad_kg,onChange:y,required:!0,min:1,className:"w-full border rounded px-3 py-2",placeholder:"Capacidad en KG"})]}),(0,t.jsxs)("div",{className:"mb-4 mr-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Color"}),(0,t.jsx)("input",{type:"text",name:"color",value:u.color,onChange:y,required:!0,className:"w-full border rounded px-3 py-2",placeholder:"Ingrese el color"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex justify-end gap-4",children:[(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 mt-4 bg-success text-white rounded hover:bg-primary-dark transition disabled:opacity-50",disabled:b,children:b?"Guardando...":"Guardar"}),(0,t.jsx)("button",{type:"button",onClick:()=>r(!1),className:"mt-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition",children:"Cerrar"})]}),h&&(0,t.jsx)("div",{className:"mt-4 p-2 bg-red-100 text-red-700 rounded",children:h})]})]})})]})]})}},71847:(e,r,a)=>{"use strict";a.d(r,{A:()=>n});var t=a(12115);let s=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},l=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,t.forwardRef)((e,r)=>{let{color:a="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:n,className:c="",children:i,iconNode:m,...u}=e;return(0,t.createElement)("svg",{ref:r,...o,width:s,height:s,stroke:a,strokeWidth:n?24*Number(d)/Number(s):d,className:l("lucide",c),...!i&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(i)?i:[i]])}),n=(e,r)=>{let a=(0,t.forwardRef)((a,o)=>{let{className:n,...c}=a;return(0,t.createElement)(d,{ref:o,iconNode:r,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...c})});return a.displayName=s(e),a}},84926:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},88122:(e,r,a)=>{Promise.resolve().then(a.bind(a,62147))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=88122)),_N_E=e.O()}]);