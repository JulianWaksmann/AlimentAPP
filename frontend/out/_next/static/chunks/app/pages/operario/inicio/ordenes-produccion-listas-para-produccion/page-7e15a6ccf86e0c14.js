(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{1730:(e,o,n)=>{"use strict";n.d(o,{A:()=>a});var t=n(5155);n(2115);let a=()=>(0,t.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,t.jsx)("h4",{children:"Gestion de Empresas"})]})},2050:(e,o,n)=>{Promise.resolve().then(n.bind(n,7445))},2121:(e,o,n)=>{"use strict";n.d(o,{A:()=>r});var t=n(5155),a=n(2115);let r=e=>{let{ordenes:o,estadoSiguiente:n,onCambiarEstado:r}=e,[s,c]=(0,a.useState)(null),[d,i]=(0,a.useState)(null),l=async e=>{i(e),await r(e),i(null),c(null)};return(0,t.jsx)("div",{className:"w-full  mx-auto p-2",children:0===o.length?(0,t.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No hay \xf3rdenes de trabajo pendientes"}):(0,t.jsx)("ul",{className:"space-y-3",children:o.map(e=>(0,t.jsxs)("li",{className:"bg-white rounded-lg shadow p-3 flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"font-bold text-primary",children:["Orden #",e.id_orden_produccion]}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-gray-200 text-gray-700",children:e.estado_orden_produccion})]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Cliente:"})," ",e.nombre_cliente," ",e.apellido_cliente]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Producto:"})," ",e.nombre_producto," x",e.cantidad_producto]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Fecha creaci\xf3n:"})," ",e.fecha_creacion_orden_venta&&new Date(e.fecha_creacion_orden_venta).getTime()>0?new Date(e.fecha_creacion_orden_venta).toLocaleDateString():"-"]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Fecha entrega:"})," ",e.fechaentrega_orden_venta&&new Date(e.fechaentrega_orden_venta).getTime()>0?new Date(e.fechaentrega_orden_venta).toLocaleDateString():"-"]}),s===e.id_orden_produccion?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("span",{className:"text-xs text-gray-700",children:["\xbfConfirmar cambio de estado a ",(0,t.jsx)("b",{children:n}),"?"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"flex-1 bg-details text-black rounded px-2 py-1 text-xs",disabled:d===e.id_orden_produccion,onClick:()=>l(e.id_orden_produccion),children:d===e.id_orden_produccion?"Cambiando...":"Confirmar"}),(0,t.jsx)("button",{className:"flex-1 bg-red-500  text-white rounded px-2 py-1 text-xs",onClick:()=>c(null),children:"Cancelar"})]})]}):(0,t.jsxs)("button",{className:"w-full bg-details  text-black rounded px-2 py-1 text-xs mt-2",onClick:()=>c(e.id_orden_produccion),children:["Cambiar estado a ",n]})]},e.id_orden_produccion))})})}},7445:(e,o,n)=>{"use strict";n.r(o),n.d(o,{default:()=>d});var t=n(5155),a=n(2115),r=n(1730),s=n(8213),c=n(2121);let d=()=>{let[e,o]=(0,a.useState)([]);a.useEffect(()=>{(async()=>{try{let e=await (0,s.Z7)("lista_para_produccion");o(e)}catch(e){console.error("Error fetching data:",e)}})()},[]);let n=async e=>{try{await (0,s.K5)(e,"en_proceso"),o(o=>o.filter(o=>o.id_orden_produccion!==e))}catch(e){console.error("Error actualizando estado:",e)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)(r.A,{}),(0,t.jsx)("div",{className:"text-lg font-bold mb-2",children:"Ordenes de Producci\xf3n Listas para Producci\xf3n"}),(0,t.jsx)(c.A,{ordenes:e,estadoSiguiente:"en_proceso",onCambiarEstado:n})]})}},8213:(e,o,n)=>{"use strict";n.d(o,{Bs:()=>a,K5:()=>r,Z7:()=>s});let t="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function a(){let e=await fetch("".concat(t,"/orden-produccion"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let o=await e.json();return console.log(o),o.ordenes_produccion}async function r(e,o){if(console.log("actualizar ot "+e+" a estado: "+o),!(await fetch("".concat(t,"/orden-produccion/update-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_produccion:e,estado:o})})).ok)throw Error("Error updating orden de produccion")}async function s(e){console.log("fetch ordenes de produccion en estado: "+e);let o=await fetch("".concat(t,"/orden-produccion/listar-orden-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado_orden_produccion:e})});if(!o.ok)throw Error("Error fetching productos");let n=await o.json();return console.log(n),n.ordenes_produccion}}},e=>{e.O(0,[441,255,358],()=>e(e.s=2050)),_N_E=e.O()}]);