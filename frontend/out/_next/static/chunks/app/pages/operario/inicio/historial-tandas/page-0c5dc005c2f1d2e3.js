(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9799],{1208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(95155),r=a(96440),n=a(12115);let i=e=>e?new Date(e).toLocaleString():"—";function d(e){let{tandas:t,className:a}=e,[r,d]=(0,n.useState)({}),[l,c]=(0,n.useState)({}),[o,m]=(0,n.useState)(t||[]),x=new Date;return((0,n.useEffect)(()=>{m(t||[])},[t]),o&&0!==o.length)?(0,s.jsx)("div",{className:"space-y-4 p-4 ".concat(null!=a?a:""),children:o.map((e,t)=>{var a,n;let o=null!=(a=e.id_linea_produccion)?a:t,m=null!=(n=e.tandas_de_produccion)?n:[];return(0,s.jsxs)("article",{className:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between p-3 sm:p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-base font-semibold text-gray-800",children:["L\xednea de Producci\xf3n #",o," "]}),e.nombre_linea_produccion?(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["\xb7 ",e.nombre_linea_produccion]}):null,"completada"===e.tandas_de_produccion[0].estado_tanda_produccion?(0,s.jsx)("span",{className:"text-sm text-green-500",children:"\xb7 Completada"}):(0,s.jsx)("span",{className:"text-sm text-orange-500",children:"\xb7 En proceso"}),m.map(e=>{var t,a,r;return(0,s.jsx)("div",{className:"text-sm text-gray-500",children:(0,s.jsxs)("div",{children:["Orden #",e.id_orden_produccion," -"," ",null!=(a=e.nombre_producto)?a:"Producto #".concat(null!=(t=e.id_producto)?t:"—")," ","\xb7 ",null!=(r=e.cantidad_kg_tanda)?r:"—"," kg"]})},e.id_orden_produccion)})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("button",{onClick:()=>d(e=>({...e,[o]:!e[o]})),"aria-expanded":!!r[o],className:"text-sm px-3 py-1 rounded-md bg-primary/10 text-primary hover:bg-primary/20",children:r[o]?"Ocultar":"Ver"})})]}),r[o]&&(0,s.jsxs)("div",{className:"divide-y",children:[m.map(e=>{var t,a,r,n,d,o,m,u,h,p,_,g,j;let v=null!=(a=e.id_orden_produccion)?a:Math.random();return(0,s.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:null!=(n=e.nombre_producto)?n:"Producto #".concat(null!=(r=e.id_producto)?r:"—")}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Cliente: ",null!=(d=e.nombre_cliente)?d:"—"," ",null!=(o=e.apellido_cliente)?o:""]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[null!=(m=e.cantidad_kg_tanda)?m:"—"," kg"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Sec: ",null!=(u=e.secuencia_en_linea)?u:"—"]})]})]}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[(0,s.jsxs)("div",{children:["Fecha creaci\xf3n de orden de producci\xf3n:"," ",i(e.fecha_creacion_orden_produccion)]}),(0,s.jsxs)("div",{children:["Fecha de entrega solicitada:"," ",i(e.fecha_entrega_solicitada_orden_venta)]}),(0,s.jsxs)("div",{className:"mt-1",children:["Estado tanda:"," ",(0,s.jsx)("span",{className:"font-medium ".concat(x>new Date(null!=(h=e.fecha_entrega_solicitada_orden_venta)?h:"")?"text-red-600":"text-green-600"),children:x>new Date(null!=(p=e.fecha_entrega_solicitada_orden_venta)?p:"")?"Retrasada":"A tiempo"})]})]})]})}),(0,s.jsx)("div",{className:"mt-3 flex items-center gap-2",children:(0,s.jsx)("button",{onClick:()=>c(e=>({...e,[v]:!e[v]})),className:"text-sm px-3 py-1 rounded-md bg-gray-100 text-gray-700 hover:bg-gray-200",children:l[v]?"Ocultar detalle":"Ver detalle"})}),l[v]&&(0,s.jsxs)("div",{className:"mt-3 bg-gray-50 p-3 rounded-md text-sm text-gray-700",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Id Orden:"})," ",e.id_orden_produccion]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Cantidad producto:"})," ",null!=(_=e.cantidad_producto)?_:"—"," bultos"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Fecha entrega solicitada:"})," ",i(e.fecha_entrega_solicitada_orden_venta)]})]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsxs)("details",{className:"bg-white border rounded-md",children:[(0,s.jsxs)("summary",{className:"px-3 py-2 cursor-pointer flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Materias primas requeridas"}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[null!=(g=null==(t=e.materias_primas_requeridas)?void 0:t.length)?g:0," ","items"]})]}),(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(null!=(j=e.materias_primas_requeridas)?j:[]).map(e=>{var t,a;return(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.nombre_materia_prima}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.codigo_lote})]}),(0,s.jsxs)("div",{className:"text-right text-sm text-gray-700",children:[e.cantidad_materia_prima," ",null!=(t=e.unidad_medida_materia_prima)?t:""]})]},null!=(a=e.id_lote_materia_prima)?a:e.codigo_lote)}),(!e.materias_primas_requeridas||0===e.materias_primas_requeridas.length)&&(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"No hay materias primas asignadas"})]})]})})]})]},v)}),0===m.length&&(0,s.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"No hay \xf3rdenes en esta tanda"})]})]},o)})}):(0,s.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"No hay tandas para mostrar"})}var l=a(51730);let c=()=>{let[e,t]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{t([...await (0,r.Ec)("en_progreso"),...await (0,r.Ec)("completada")])})()},[]),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.default,{}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center pt-4 text-primary ",children:"Historial de Tandas"}),(0,s.jsx)(d,{tandas:e})]})}},20063:(e,t,a)=>{"use strict";var s=a(47260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},38999:(e,t,a)=>{Promise.resolve().then(a.bind(a,1208))},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(12115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:d=2,absoluteStrokeWidth:l,className:c="",children:o,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:a,strokeWidth:l?24*Number(d)/Number(r):d,className:n("lucide",c),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),l=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{className:l,...c}=a;return(0,s.createElement)(d,{ref:i,iconNode:t,className:n("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return a.displayName=r(e),a}},84926:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])}},e=>{e.O(0,[1841,8441,1255,7358],()=>e(e.s=38999)),_N_E=e.O()}]);