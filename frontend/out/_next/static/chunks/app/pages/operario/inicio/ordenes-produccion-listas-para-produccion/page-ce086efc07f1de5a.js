(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{1730:(e,a,o)=>{"use strict";o.d(a,{A:()=>n});var r=o(5155);o(2115);let n=()=>(0,r.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,r.jsx)("h4",{children:"Gestion de Empresas"})]})},2050:(e,a,o)=>{Promise.resolve().then(o.bind(o,7445))},2121:(e,a,o)=>{"use strict";o.d(a,{A:()=>s});var r=o(5155),n=o(2115);let s=e=>{let{ordenes:a,estadoSiguiente:o,onCambiarEstado:s}=e,[t,d]=(0,n.useState)(null),[c,i]=(0,n.useState)(null),[l,p]=(0,n.useState)(null),u=async e=>{i(e),await s(e),i(null),d(null)};return(0,r.jsx)("div",{className:"w-full  mx-auto p-2",children:0===a.length?(0,r.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No hay \xf3rdenes de trabajo pendientes"}):(0,r.jsx)("ul",{className:"space-y-3",children:a.map(e=>(0,r.jsxs)("li",{className:"bg-white rounded-lg shadow p-3 flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"font-bold text-primary",children:["Orden #",e.id_orden_produccion]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-gray-200 text-gray-700",children:e.estado_orden_produccion})]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Cliente:"})," ",e.nombre_cliente," ",e.apellido_cliente]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Producto:"})," ",e.nombre_producto," "]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Cantidad:"})," ",e.cantidad_producto]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Fecha creaci\xf3n de orden de producci\xf3n:"})," ",e.fecha_creacion_orden_produccion&&new Date(e.fecha_creacion_orden_produccion).getTime()>0?new Date(e.fecha_creacion_orden_produccion).toLocaleDateString():"-"]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Fecha fin de orden de producci\xf3n:"})," ",e.fecha_fin_orden_produccion&&new Date(e.fecha_fin_orden_produccion).getTime()>0?new Date(e.fecha_fin_orden_produccion).toLocaleDateString():"-"]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Fecha entrega del pedido:"})," ",e.fecha_entrega_solicitada_orden_venta&&new Date(e.fecha_entrega_solicitada_orden_venta).getTime()>0?new Date(e.fecha_entrega_solicitada_orden_venta).toLocaleDateString():"-"]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[o?(0,r.jsxs)("button",{className:"flex-1 bg-details text-black rounded px-2 py-1 text-xs",onClick:()=>d(e.id_orden_produccion),children:["Cambiar estado a ",o]}):null,(0,r.jsx)("button",{className:"flex-1 bg-blue-500 text-white rounded px-2 py-1 text-xs",onClick:()=>p(l===e.id_orden_produccion?null:e.id_orden_produccion),children:l===e.id_orden_produccion?"Ocultar materia prima":"Ver materia prima"})]}),e.materias_primas_requeridas.length>0&&l===e.id_orden_produccion&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Materias primas requeridas:"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-sm mt-1",children:e.materias_primas_requeridas.map(e=>(0,r.jsxs)("li",{children:[e.nombre_materia_prima," - ",e.cantidad_materia_prima," ",e.unidad_medida_materia_prima," (Lote: ",e.codigo_lote,")"]},e.id_lote_materia_prima))})]}),t===e.id_orden_produccion&&(0,r.jsxs)("div",{className:"flex flex-col gap-2 mt-2",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-700",children:["\xbfConfirmar cambio de estado a ",(0,r.jsx)("b",{children:o}),"?"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{className:"flex-1 bg-details text-black rounded px-2 py-1 text-xs",disabled:c===e.id_orden_produccion,onClick:()=>u(e.id_orden_produccion),children:c===e.id_orden_produccion?"Cambiando...":"Confirmar"}),(0,r.jsx)("button",{className:"flex-1 bg-red-500  text-white rounded px-2 py-1 text-xs",onClick:()=>d(null),children:"Cancelar"})]})]})]},e.id_orden_produccion))})})}},7445:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>c});var r=o(5155),n=o(2115),s=o(1730),t=o(8213),d=o(2121);let c=()=>{let[e,a]=(0,n.useState)([]);n.useEffect(()=>{(async()=>{try{let e=await (0,t.Z7)("lista_para_produccion");a(e)}catch(e){console.error("Error fetching data:",e)}})()},[]);let o=async e=>{try{await (0,t.K5)(e,"en_proceso"),a(a=>a.filter(a=>a.id_orden_produccion!==e))}catch(e){console.error("Error actualizando estado:",e)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)(s.A,{}),(0,r.jsx)("div",{className:"text-lg font-bold mb-2",children:"Ordenes de Producci\xf3n Listas para Producci\xf3n"}),(0,r.jsx)(d.A,{ordenes:e,estadoSiguiente:"en_proceso",onCambiarEstado:o})]})}},8213:(e,a,o)=>{"use strict";o.d(a,{Bs:()=>n,K5:()=>s,Z7:()=>t});let r="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function n(){let e=await fetch("".concat(r,"/orden-produccion/orden-produccion-listaprd-enproceso-finalizada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let a=await e.json();return console.log(a.ordenes_produccion),Array.isArray(a.ordenes_produccion)?a.ordenes_produccion:[]}async function s(e,a){if(console.log("actualizar ot "+e+" a estado: "+a),!(await fetch("".concat(r,"/orden-produccion/update-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_produccion:e,estado:a})})).ok)throw Error("Error updating orden de produccion")}async function t(e){console.log("fetch ordenes de produccion en estado: "+e);let a=await fetch("".concat(r,"/orden-produccion/listar-orden-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado_orden_produccion:e})});if(!a.ok)throw Error("Error fetching productos");let o=await a.json();return console.log(o),o.ordenes_produccion}}},e=>{e.O(0,[441,255,358],()=>e(e.s=2050)),_N_E=e.O()}]);