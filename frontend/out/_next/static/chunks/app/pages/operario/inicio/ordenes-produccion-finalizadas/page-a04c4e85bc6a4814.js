(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1730:(e,n,a)=>{"use strict";a.d(n,{A:()=>t});var o=a(5155);a(2115);let t=()=>(0,o.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center",children:[(0,o.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,o.jsx)("h4",{children:"Gestion de Empresas"})]})},2121:(e,n,a)=>{"use strict";a.d(n,{A:()=>r});var o=a(5155),t=a(2115);let r=e=>{let{ordenes:n,estadoSiguiente:a,onCambiarEstado:r}=e,[s,c]=(0,t.useState)(null),[d,i]=(0,t.useState)(null),l=async e=>{i(e),await r(e),i(null),c(null)};return(0,o.jsx)("div",{className:"w-full  mx-auto p-2",children:0===n.length?(0,o.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No hay \xf3rdenes de trabajo pendientes"}):(0,o.jsx)("ul",{className:"space-y-3",children:n.map(e=>(0,o.jsxs)("li",{className:"bg-white rounded-lg shadow p-3 flex flex-col gap-2",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("span",{className:"font-bold text-primary",children:["Orden #",e.id_orden_produccion]}),(0,o.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-gray-200 text-gray-700",children:e.estado_orden_produccion})]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Cliente:"})," ",e.nombre_cliente," ",e.apellido_cliente]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Producto:"})," ",e.nombre_producto," x",e.cantidad_producto]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Fecha creaci\xf3n:"})," ",e.fecha_creacion_orden_venta&&new Date(e.fecha_creacion_orden_venta).getTime()>0?new Date(e.fecha_creacion_orden_venta).toLocaleDateString():"-"]}),(0,o.jsxs)("div",{className:"text-sm",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Fecha entrega:"})," ",e.fechaentrega_orden_venta&&new Date(e.fechaentrega_orden_venta).getTime()>0?new Date(e.fechaentrega_orden_venta).toLocaleDateString():"-"]}),s===e.id_orden_produccion?(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsxs)("span",{className:"text-xs text-gray-700",children:["\xbfConfirmar cambio de estado a ",(0,o.jsx)("b",{children:a}),"?"]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{className:"flex-1 bg-details text-black rounded px-2 py-1 text-xs",disabled:d===e.id_orden_produccion,onClick:()=>l(e.id_orden_produccion),children:d===e.id_orden_produccion?"Cambiando...":"Confirmar"}),(0,o.jsx)("button",{className:"flex-1 bg-red-500  text-white rounded px-2 py-1 text-xs",onClick:()=>c(null),children:"Cancelar"})]})]}):(0,o.jsxs)("button",{className:"w-full bg-details  text-black rounded px-2 py-1 text-xs mt-2",onClick:()=>c(e.id_orden_produccion),children:["Cambiar estado a ",a]})]},e.id_orden_produccion))})})}},6932:(e,n,a)=>{Promise.resolve().then(a.bind(a,9993))},8213:(e,n,a)=>{"use strict";a.d(n,{Bs:()=>t,K5:()=>r,Z7:()=>s});let o="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function t(){let e=await fetch("".concat(o,"/orden-produccion"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let n=await e.json();return console.log(n),n.ordenes_produccion}async function r(e,n){if(console.log("actualizar ot "+e+" a estado: "+n),!(await fetch("".concat(o,"/orden-produccion/update-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_produccion:e,estado:n})})).ok)throw Error("Error updating orden de produccion")}async function s(e){console.log("fetch ordenes de produccion en estado: "+e);let n=await fetch("".concat(o,"/orden-produccion/listar-orden-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado_orden_produccion:e})});if(!n.ok)throw Error("Error fetching productos");let a=await n.json();return console.log(a),a.ordenes_produccion}},9993:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>d});var o=a(5155),t=a(2115),r=a(1730),s=a(8213),c=a(2121);let d=()=>{let[e,n]=(0,t.useState)([]);t.useEffect(()=>{(async()=>{try{let e=await (0,s.Z7)("finalizada");n(e)}catch(e){console.error("Error fetching data:",e)}})()},[]);let a=async e=>{try{await (0,s.K5)(e,"en_proceso"),n(n=>n.filter(n=>n.id_orden_produccion!==e))}catch(e){console.error("Error actualizando estado:",e)}};return(0,o.jsxs)("div",{children:[(0,o.jsx)(r.A,{}),(0,o.jsx)("div",{className:"text-lg font-bold mb-2",children:"Ordenes de Producci\xf3n Finalizadas"}),(0,o.jsx)(c.A,{ordenes:e,estadoSiguiente:"",onCambiarEstado:a})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=6932)),_N_E=e.O()}]);