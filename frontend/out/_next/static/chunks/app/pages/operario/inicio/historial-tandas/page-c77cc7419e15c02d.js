(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9799],{1208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(95155),s=a(96440),n=a(12115);let i=e=>e?new Date(e).toLocaleString():"—";function d(e){let{tandas:t,className:a}=e,[s,d]=(0,n.useState)({}),[c,o]=(0,n.useState)({}),[l,u]=(0,n.useState)(t||[]),m=new Date;return((0,n.useEffect)(()=>{u(t||[])},[t]),l&&0!==l.length)?(0,r.jsx)("div",{className:"space-y-4 p-4 ".concat(null!=a?a:""),children:l.map((e,t)=>{var a,n;let l=null!=(a=e.id_linea_produccion)?a:t,u=null!=(n=e.tandas_de_produccion)?n:[];return(0,r.jsxs)("article",{className:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between p-3 sm:p-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-base font-semibold text-gray-800",children:["L\xednea de Producci\xf3n #",l," "]}),e.nombre_linea_produccion?(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["\xb7 ",e.nombre_linea_produccion]}):null,"completada"===e.tandas_de_produccion[0].estado_tanda_produccion?(0,r.jsx)("span",{className:"text-sm text-green-500",children:"\xb7 Completada"}):(0,r.jsx)("span",{className:"text-sm text-orange-500",children:"\xb7 En proceso"}),u.map(e=>{var t,a,s;return(0,r.jsx)("div",{className:"text-sm text-gray-500",children:(0,r.jsxs)("div",{children:["Orden #",e.id_orden_produccion," -"," ",null!=(a=e.nombre_producto)?a:"Producto #".concat(null!=(t=e.id_producto)?t:"—")," ","\xb7 ",null!=(s=e.cantidad_kg_tanda)?s:"—"," kg"]})},e.id_orden_produccion)})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{onClick:()=>d(e=>({...e,[l]:!e[l]})),"aria-expanded":!!s[l],className:"text-sm px-3 py-1 rounded-md bg-primary/10 text-primary hover:bg-primary/20",children:s[l]?"Ocultar":"Ver"})})]}),s[l]&&(0,r.jsxs)("div",{className:"divide-y",children:[u.map(e=>{var t,a,s,n,d,l,u,p,h,x,g,_,j;let f=null!=(a=e.id_orden_produccion)?a:Math.random();return(0,r.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,r.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:null!=(n=e.nombre_producto)?n:"Producto #".concat(null!=(s=e.id_producto)?s:"—")}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Cliente: ",null!=(d=e.nombre_cliente)?d:"—"," ",null!=(l=e.apellido_cliente)?l:""]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[null!=(u=e.cantidad_kg_tanda)?u:"—"," kg"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Sec: ",null!=(p=e.secuencia_en_linea)?p:"—"]})]})]}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[(0,r.jsxs)("div",{children:["Fecha creaci\xf3n de orden de producci\xf3n:"," ",i(e.fecha_creacion_orden_produccion)]}),(0,r.jsxs)("div",{children:["Fecha de entrega solicitada:"," ",i(e.fecha_entrega_solicitada_orden_venta)]}),(0,r.jsxs)("div",{className:"mt-1",children:["Estado tanda:"," ",(0,r.jsx)("span",{className:"font-medium ".concat(m>new Date(null!=(h=e.fecha_entrega_solicitada_orden_venta)?h:"")?"text-red-600":"text-green-600"),children:m>new Date(null!=(x=e.fecha_entrega_solicitada_orden_venta)?x:"")?"Retrasada":"A tiempo"})]})]})]})}),(0,r.jsx)("div",{className:"mt-3 flex items-center gap-2",children:(0,r.jsx)("button",{onClick:()=>o(e=>({...e,[f]:!e[f]})),className:"text-sm px-3 py-1 rounded-md bg-gray-100 text-gray-700 hover:bg-gray-200",children:c[f]?"Ocultar detalle":"Ver detalle"})}),c[f]&&(0,r.jsxs)("div",{className:"mt-3 bg-gray-50 p-3 rounded-md text-sm text-gray-700",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Id Orden:"})," ",e.id_orden_produccion]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Cantidad producto:"})," ",null!=(g=e.cantidad_producto)?g:"—"," bultos"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Fecha entrega solicitada:"})," ",i(e.fecha_entrega_solicitada_orden_venta)]})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsxs)("details",{className:"bg-white border rounded-md",children:[(0,r.jsxs)("summary",{className:"px-3 py-2 cursor-pointer flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Materias primas requeridas"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[null!=(_=null==(t=e.materias_primas_requeridas)?void 0:t.length)?_:0," ","items"]})]}),(0,r.jsxs)("div",{className:"p-3 space-y-2",children:[(null!=(j=e.materias_primas_requeridas)?j:[]).map(e=>{var t,a;return(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.nombre_materia_prima}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.codigo_lote})]}),(0,r.jsxs)("div",{className:"text-right text-sm text-gray-700",children:[e.cantidad_materia_prima," ",null!=(t=e.unidad_medida_materia_prima)?t:""]})]},null!=(a=e.id_lote_materia_prima)?a:e.codigo_lote)}),(!e.materias_primas_requeridas||0===e.materias_primas_requeridas.length)&&(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"No hay materias primas asignadas"})]})]})})]})]},f)}),0===u.length&&(0,r.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"No hay \xf3rdenes en esta tanda"})]})]},l)})}):(0,r.jsx)("div",{className:"p-4 text-center text-sm text-gray-500",children:"No hay tandas para mostrar"})}var c=a(51730);let o=()=>{let[e,t]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>{t([...await (0,s.Ec)("en_progreso"),...await (0,s.Ec)("completada")])})()},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.default,{}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center pt-4 text-primary ",children:"Historial de Tandas"}),(0,r.jsx)(d,{tandas:e})]})}},20063:(e,t,a)=>{"use strict";var r=a(47260);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},38999:(e,t,a)=>{Promise.resolve().then(a.bind(a,1208))},51730:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(95155);a(12115);var s=a(20063),n=a(84926);let i=()=>{let e=(0,s.useRouter)();return(0,r.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center relative flex items-center justify-center",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,r.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,r.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,r.jsx)(n.A,{size:16}),(0,r.jsx)("span",{children:"Salir"})]})]})}},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:o="",children:l,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:c?24*Number(d)/Number(s):d,className:n("lucide",o),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(l)?l:[l]])}),c=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:c,...o}=a;return(0,r.createElement)(d,{ref:i,iconNode:t,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...o})});return a.displayName=s(e),a}},84926:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},96440:(e,t,a)=>{"use strict";a.d(t,{Ec:()=>s,N0:()=>i,sI:()=>d,tv:()=>c,w_:()=>n});let r="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function s(e){let t=await fetch("".concat(r,"/tanda-produccion/post-obtener-tanda-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:e})});if(!t.ok)throw Error("Error fetching tandas sugeridas");let a=await t.json();return console.log("tandas"+a.lineas_produccion),a.lineas_produccion}async function n(e,t){if(console.log("actualizar ot "+e+" a estado: "+t),console.log("actualizar ot "+e+" a estado: "+t),!(await fetch("".concat(r,"/tanda-produccion/post-update-tandas-produccion-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_tandas:e,estado:t})})).ok)throw Error("Error updating tanda produccion")}async function i(){let e=await fetch("".concat(r,"/tanda-produccion/get-all-ordenes-produccion-aceptadas-por-linea-produccion"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error generating tanda");let t=await e.json();return console.log(t),t.lineas_produccion}async function d(e){console.log("Crear Tanda Produccion Manual: ",JSON.stringify({id_linea_produccion:e.id_linea_produccion,ordenes_produccion:e.ordenes_produccion}));let t=await fetch("".concat(r,"/tanda-produccion/post-crear-tandas-produccion-manual"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw console.log("Error creating tanda produccion manual:",e),Error(e.error||"Error creating tanda produccion manual")}return t.json()}async function c(){try{let e=await fetch("".concat(r,"/orden-produccion/planificador_op_daily"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.error||"Error fetching planificacion data")}return await e.json()}catch(e){throw console.log("error general: "+e),e}}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=38999)),_N_E=e.O()}]);