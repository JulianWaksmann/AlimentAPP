(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7698],{20063:(e,r,t)=>{"use strict";var a=t(47260);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},22121:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(95155),n=t(12115);let o=e=>{let{ordenes:r,estadoSiguiente:t,onCambiarEstado:o}=e,[s,i]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[l,u]=(0,n.useState)(null),p=async e=>{c(e),await o(e),c(null),i(null)};return(0,a.jsx)("div",{className:"w-full  mx-auto p-2",children:0===r.length?(0,a.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No hay \xf3rdenes de trabajo pendientes"}):(0,a.jsx)("ul",{className:"space-y-3",children:r.map(e=>(0,a.jsxs)("li",{className:"bg-white rounded-lg shadow p-3 flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"font-bold text-primary",children:["Orden #",e.id_orden_produccion]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-gray-200 text-gray-700",children:e.estado_orden_produccion})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Cliente:"})," ",e.nombre_cliente," ",e.apellido_cliente]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Producto:"})," ",e.nombre_producto," "]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Cantidad:"})," ",e.cantidad_producto]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha creaci\xf3n de orden de producci\xf3n:"})," ",e.fecha_creacion_orden_produccion&&new Date(e.fecha_creacion_orden_produccion).getTime()>0?new Date(e.fecha_creacion_orden_produccion).toLocaleDateString():"-"]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha fin de orden de producci\xf3n:"})," ",e.fecha_fin_orden_produccion&&new Date(e.fecha_fin_orden_produccion).getTime()>0?new Date(e.fecha_fin_orden_produccion).toLocaleDateString():"-"]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha entrega del pedido:"})," ",e.fecha_entrega_solicitada_orden_venta&&new Date(e.fecha_entrega_solicitada_orden_venta).getTime()>0?new Date(e.fecha_entrega_solicitada_orden_venta).toLocaleDateString():"-"]}),(0,a.jsx)("div",{className:"flex gap-2 mt-2",children:(0,a.jsx)("button",{className:"flex-1 bg-blue-500 text-white rounded px-2 py-1 text-xs",onClick:()=>u(l===e.id_orden_produccion?null:e.id_orden_produccion),children:l===e.id_orden_produccion?"Ocultar materia prima":"Ver materia prima"})}),e.materias_primas_requeridas.length>0&&l===e.id_orden_produccion&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Materias primas requeridas:"}),(0,a.jsx)("ul",{className:"list-disc list-inside text-sm mt-1",children:e.materias_primas_requeridas.map(e=>(0,a.jsxs)("li",{children:[e.nombre_materia_prima," - ",e.cantidad_materia_prima," ",e.unidad_medida_materia_prima," (Lote: ",e.codigo_lote,")"]},e.id_lote_materia_prima))})]}),s===e.id_orden_produccion&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 mt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-700",children:["\xbfConfirmar cambio de estado a ",(0,a.jsx)("b",{children:t}),"?"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"flex-1 bg-details text-black rounded px-2 py-1 text-xs",disabled:d===e.id_orden_produccion,onClick:()=>p(e.id_orden_produccion),children:d===e.id_orden_produccion?"Cambiando...":"Confirmar"}),(0,a.jsx)("button",{className:"flex-1 bg-red-500  text-white rounded px-2 py-1 text-xs",onClick:()=>i(null),children:"Cancelar"})]})]})]},e.id_orden_produccion))})})}},26932:(e,r,t)=>{Promise.resolve().then(t.bind(t,79993))},51730:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});var a=t(95155);t(12115);var n=t(20063),o=t(84926);let s=()=>{let e=(0,n.useRouter)();return(0,a.jsxs)("header",{className:"bg-gradient-primary text-white py-3 text-center relative flex items-center justify-center",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,a.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,a.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,a.jsx)(o.A,{size:16}),(0,a.jsx)("span",{children:"Salir"})]})]})}},58213:(e,r,t)=>{"use strict";t.d(r,{Bs:()=>n,K5:()=>o,Z0:()=>i,Z7:()=>s});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function n(){let e=await fetch("".concat(a,"/orden-produccion/orden-produccion-listaprd-enproceso-finalizada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let r=await e.json();return Array.isArray(r.ordenes_produccion)?r.ordenes_produccion:[]}async function o(e,r){if(console.log("actualizar ot "+e+" a estado: "+r),!(await fetch("".concat(a,"/orden-produccion/update-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_produccion:e,estado:r})})).ok)throw Error("Error updating orden de produccion")}async function s(e){console.log("fetch ordenes de produccion en estado: "+e);let r=await fetch("".concat(a,"/orden-produccion/listar-orden-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado_orden_produccion:e})});if(!r.ok)throw Error("Error fetching productos");return(await r.json()).ordenes_produccion}async function i(e){let r={id_orden_produccion:e},t=await fetch("".concat(a,"/orden-produccion/post-get-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!t.ok)throw Error("Error fetching orden de produccion details");let n=await t.json();return console.log("Detalles de la orden de produccion:",r),n.orden_produccion}},71847:(e,r,t)=>{"use strict";t.d(r,{A:()=>d});var a=t(12115);let n=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},o=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:c="",children:l,iconNode:u,...p}=e;return(0,a.createElement)("svg",{ref:r,...s,width:n,height:n,stroke:t,strokeWidth:d?24*Number(i)/Number(n):i,className:o("lucide",c),...!l&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(l)?l:[l]])}),d=(e,r)=>{let t=(0,a.forwardRef)((t,s)=>{let{className:d,...c}=t;return(0,a.createElement)(i,{ref:s,iconNode:r,className:o("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return t.displayName=n(e),t}},79993:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(95155),n=t(12115),o=t(51730),s=t(58213),i=t(22121);let d=()=>{let[e,r]=(0,n.useState)([]);n.useEffect(()=>{(async()=>{try{let e=await (0,s.Z7)("finalizada");r(e)}catch(e){console.error("Error fetching data:",e)}})()},[]);let t=async e=>{try{await (0,s.K5)(e,""),r(r=>r.filter(r=>r.id_orden_produccion!==e))}catch(e){console.error("Error actualizando estado:",e)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)(o.default,{}),(0,a.jsx)("div",{className:"text-lg font-bold mb-2",children:"Ordenes de Producci\xf3n Finalizadas"}),(0,a.jsx)(i.A,{ordenes:e,onCambiarEstado:t})]})}},84926:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=26932)),_N_E=e.O()}]);