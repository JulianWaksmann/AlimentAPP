(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{4755:(e,t,n)=>{"use strict";n.d(t,{W:()=>u});var r=n(70309),o=n(55027),i=n(12115);let u=(0,i.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:u,className:l,id:c,placeholder:a,style:s,whenReady:p,zoom:f,...d},m){let[h]=(0,i.useState)({className:l,id:c,style:s}),[g,v]=(0,i.useState)(null),y=(0,i.useRef)(void 0);(0,i.useImperativeHandle)(m,()=>g?.map??null,[g]);let w=(0,i.useCallback)(i=>{if(null!==i&&!y.current){let u=new o.Map(i,d);y.current=u,null!=n&&null!=f?u.setView(n,f):null!=e&&u.fitBounds(e,t),null!=p&&u.whenReady(p),v((0,r.fB)(u))}},[]);(0,i.useEffect)(()=>()=>{g?.map.remove()},[g]);let b=g?i.createElement(r.dk,{value:g},u):a??null;return i.createElement("div",{...h,ref:w},b)})},5384:(e,t,n)=>{"use strict";n.d(t,{e:()=>l});var r=n(70055),o=n(85452),i=n(80514),u=n(55027);let l=(0,r.X3)(function({url:e,...t},n){let r=new u.TileLayer(e,(0,o.P)(t,n));return(0,i.Q)(r,n)},function(e,t,n){let{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o);let{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)})},20004:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var r=n(95155),o=n(12115),i=n(4755),u=n(5384),l=n(70055),c=n(80514),a=n(70309),s=n(55027);let p=(0,l.Lt)(function({positions:e,...t},n){let r=new s.Polyline(e,t);return(0,c.Q)(r,(0,a.W4)(n,{overlayContainer:r}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)});var f=n(26264),d=n(74136);n(35603);let m={color:"blue",weight:4},h=new s.Icon({iconUrl:"https://img.icons8.com/?size=100&id=vfv1AbUEfpHl&format=png&color=000000",iconRetinaUrl:"https://unpkg.com/leaflet/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),g=new s.Icon({iconUrl:"https://img.icons8.com/?size=100&id=7880&format=png&color=221E5F",iconRetinaUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://unpkg.com/leaflet/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),v={sequence:0,envio_id:-1,orden_venta_id:-1,lat:-34.52271017111954,lon:-58.70043496251298},y=e=>{let{data:t}=e,[n,l]=(0,o.useState)([]),c=(0,o.useMemo)(()=>(console.log("Puntos recibidos de la API:",t.ordered_points),t.ordered_points&&0!==t.ordered_points.length)?[v,...t.ordered_points.map(e=>({...e,sequence:e.sequence+1}))]:[v],[t.ordered_points]),a=(0,o.useMemo)(()=>c.map(e=>[e.lat,e.lon]),[c]);(0,o.useEffect)(()=>{if(a.length<2)return void l([]);let e=c.map(e=>[e.lon,e.lat]);(async()=>{try{let t=await fetch("https://api.openrouteservice.org/v2/directions/driving-car/geojson",{method:"POST",body:JSON.stringify({coordinates:e}),headers:{Authorization:"eyJvcmciOiI1YjNjZTM1OTc4NTExMTAwMDFjZjYyNDgiLCJpZCI6ImEyZmE4YTA1MDJhYjQ0NGJiNGQ0NmRiNGNlMjhlMzVlIiwiaCI6Im11cm11cjY0In0=","Content-Type":"application/json"}});if(!t.ok)throw Error("Error HTTP: ".concat(t.status," - ").concat(t.statusText));let n=(await t.json()).features[0].geometry.coordinates.map(e=>{let[t,n]=e;return[n,t]});l(n)}catch(e){console.error("Error al obtener la ruta de OpenRouteService:",e),l([])}})()},[c]);let s=n.length>0?n[0]:a.length>0?a[0]:[-34.6037,-58.3816];return(0,r.jsx)("div",{style:{height:"100%",width:"100%"},children:(0,r.jsxs)(i.W,{center:s,zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[(0,r.jsx)(u.e,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",maxZoom:20}),n.length>0&&(0,r.jsx)(p,{positions:n,pathOptions:m}),c.map(e=>{let t=0===e.sequence;return(0,r.jsx)(f.p,{position:[e.lat,e.lon],icon:t?g:h,children:(0,r.jsxs)(d.z,{children:[t?(0,r.jsx)("strong",{children:"Punto de inicio"}):(0,r.jsxs)(r.Fragment,{children:["Orden #",e.orden_venta_id]})," ",(0,r.jsx)("br",{}),!t&&(0,r.jsxs)(r.Fragment,{children:["Entrega: ",e.sequence-1,"\xb0 ",(0,r.jsx)("br",{})]})]})},e.sequence)})]})})}},26264:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var r=n(70055),o=n(80514),i=n(70309),u=n(55027);let l=(0,r.Nq)(function({position:e,...t},n){let r=new u.Marker(e,t);return(0,o.Q)(r,(0,i.W4)(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())})},35603:()=>{},70055:(e,t,n)=>{"use strict";n.d(t,{Nq:()=>d,wk:()=>m,Lt:()=>h,X3:()=>g});var r=n(12115),o=n(47650),i=n(70309);function u(e){return(0,r.forwardRef)(function(t,n){let{instance:o,context:u}=e(t).current;(0,r.useImperativeHandle)(n,()=>o);let{children:l}=t;return null==l?null:r.createElement(i.dk,{value:u},l)})}function l(e,t){let n=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function c(e,t){let n=(0,r.useRef)(void 0);(0,r.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}var a=n(85452),s=n(80514);function p(e,t){(0,r.useEffect)(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function f(e){return function(t){let n=(0,i.U$)(),r=e((0,a.P)(t,n),n);return l(n.map,t.attribution),c(r.current,t.eventHandlers),p(r.current,n),r}}function d(e,t){return u(f((0,s.K)(e,t)))}function m(e,t){var n,u;return n=(0,s.K)(e),u=function(e,r){let o=(0,i.U$)(),u=n((0,a.P)(e,o),o);return l(o.map,e.attribution),c(u.current,e.eventHandlers),t(u.current,o,e,r),u},(0,r.forwardRef)(function(e,t){let[n,i]=(0,r.useState)(!1),{instance:l}=u(e,i).current;(0,r.useImperativeHandle)(t,()=>l),(0,r.useEffect)(function(){n&&l.update()},[l,n,e.children]);let c=l._contentNode;return c?(0,o.createPortal)(e.children,c):null})}function h(e,t){var n;return u((n=(0,s.K)(e,t),function(e){let t=(0,i.U$)(),o=n((0,a.P)(e,t),t);c(o.current,e.eventHandlers),p(o.current,t);var u=o.current;let l=(0,r.useRef)(void 0);return(0,r.useEffect)(function(){if(e.pathOptions!==l.current){let t=e.pathOptions??{};u.instance.setStyle(t),l.current=t}},[u,e]),o}))}function g(e,t){var n;return n=f((0,s.K)(e,t)),(0,r.forwardRef)(function(e,t){let{instance:o}=n(e).current;return(0,r.useImperativeHandle)(t,()=>o),null})}},70309:(e,t,n)=>{"use strict";n.d(t,{U$:()=>l,W4:()=>i,dk:()=>u,fB:()=>o});var r=n(12115);function o(e){return Object.freeze({__version:1,map:e})}function i(e,t){return Object.freeze({...e,...t})}let u=(0,r.createContext)(null);function l(){let e=(0,r.use)(u);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}},74136:(e,t,n)=>{"use strict";n.d(t,{z:()=>l});var r=n(70055),o=n(80514),i=n(55027),u=n(12115);let l=(0,r.wk)(function(e,t){let n=new i.Popup(e,t.overlayContainer);return(0,o.Q)(n,t)},function(e,t,{position:n},r){(0,u.useEffect)(function(){let{instance:o}=e;function i(e){e.popup===o&&(o.update(),r(!0))}function u(e){e.popup===o&&r(!1)}return t.map.on({popupopen:i,popupclose:u}),null==t.overlayContainer?(null!=n&&o.setLatLng(n),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:i,popupclose:u}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}},[e,t,r,n])})},80514:(e,t,n)=>{"use strict";n.d(t,{K:()=>i,Q:()=>o});var r=n(12115);function o(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function i(e,t){return null==t?function(t,n){let o=(0,r.useRef)(void 0);return o.current||(o.current=e(t,n)),o}:function(n,o){let i=(0,r.useRef)(void 0);i.current||(i.current=e(n,o));let u=(0,r.useRef)(n),{instance:l}=i.current;return(0,r.useEffect)(function(){u.current!==n&&(t(l,n,u.current),u.current=n)},[l,n,t]),i}}},85452:(e,t,n)=>{"use strict";function r(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}n.d(t,{P:()=>r})}}]);