"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3351],{15239:(e,t,r)=>{r.d(t,{default:()=>o.a});var a=r(54652),o=r.n(a)},20063:(e,t,r)=>{var a=r(47260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},50294:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(95155),o=r(12115);let n={en_proceso:"bg-yellow-100 text-yellow-700",lista_para_produccion:"bg-blue-100 text-blue-700",finalizada:"bg-green-100 text-green-700",pendiente:"bg-gray-100 text-gray-700"},i=[{value:"id_orden_produccion",label:"ID Orden"},{value:"id_orden_venta",label:"ID Pedido"},{value:"id_cliente",label:"ID Cliente"},{value:"id_producto",label:"ID Producto"},{value:"fecha_creacion_orden_venta",label:"Fecha Creaci\xf3n"},{value:"fecha_entrega_solicitada_orden_venta",label:"Fecha Entrega"}];function d(e){let{ordenes:t}=e,[r,d]=(0,o.useState)("fecha_creacion_orden_venta"),[s,c]=(0,o.useState)(!1),[l,u]=(0,o.useState)(null),[m,p]=(0,o.useState)(""),[h,f]=(0,o.useState)(""),[_,x]=(0,o.useState)(""),g=(0,o.useMemo)(()=>{let e=[...t];return m&&(e=e.filter(e=>e.estado_orden_produccion===m)),h&&(e=e.filter(e=>"".concat(e.nombre_cliente," ").concat(e.apellido_cliente)===h)),_&&(e=e.filter(e=>e.nombre_producto.toLowerCase().includes(_.toLowerCase()))),e.sort((e,t)=>{let a=e[r],o=t[r];return(("id_orden_produccion"===r||"id_pedido"===r||"id_cliente"===r||"id_producto"===r)&&(a=Number(a),o=Number(o)),("fecha_creacion_orden_venta"===r||"fecha_entrega_solicitada_orden_venta"===r)&&(a=new Date(a).getTime(),o=new Date(o).getTime()),"number"==typeof a&&"number"==typeof o)?s?a-o:o-a:s?String(a).localeCompare(String(o)):String(o).localeCompare(String(a))}),e},[t,r,s,m,h,_]),b=(0,o.useMemo)(()=>[...new Set(t.map(e=>e.estado_orden_produccion))],[t]),j=(0,o.useMemo)(()=>[...new Set(t.map(e=>"".concat(e.nombre_cliente," ").concat(e.apellido_cliente)))],[t]);return(0,a.jsxs)("div",{className:"overflow-x-auto rounded-lg shadow-lg bg-white p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-primary",children:"\xd3rdenes de Producci\xf3n"}),(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"filtro-estado",className:"text-sm font-medium",children:"Estado:"}),(0,a.jsxs)("select",{id:"filtro-estado",value:m,onChange:e=>p(e.target.value),className:"border rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),b.map(e=>(0,a.jsx)("option",{value:e,children:e.replace("_"," ")},e))]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"filtro-cliente",className:"text-sm font-medium",children:"Cliente:"}),(0,a.jsxs)("select",{id:"filtro-cliente",value:h,onChange:e=>f(e.target.value),className:"border rounded px-2 py-1 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Todos"}),j.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"filtro-producto",className:"text-sm font-medium",children:"Producto:"}),(0,a.jsx)("input",{type:"text",id:"filtro-producto",value:_,onChange:e=>x(e.target.value),className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar por producto..."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"ordenar",className:"text-sm font-medium",children:"Ordenar por:"}),(0,a.jsx)("select",{id:"ordenar",value:r,onChange:e=>d(e.target.value),className:"border rounded px-2 py-1 text-sm",children:i.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("button",{className:"ml-2 px-2 py-1 rounded bg-neutral-light text-xs",onClick:()=>c(e=>!e),title:"Invertir orden",children:s?"Ascendente ↑":"Descendente ↓"})]})]})}),(0,a.jsx)("div",{className:" mt-6 min-w-full  ",children:g.map(e=>(0,a.jsxs)("div",{className:"rounded-lg border p-3 shadow-sm bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("span",{className:"font-bold text-primary",children:["Orden #",e.id_orden_produccion]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(n[e.estado_orden_produccion]||"bg-gray-200 text-gray-700"),children:e.estado_orden_produccion.replaceAll("_"," ")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("span",{className:"font-semibold mb-1 text-xs text-center bg-details rounded-full px-2 py-1 text-black",children:["Pedido: ",e.id_orden_venta]}),(0,a.jsxs)("span",{className:"font-semibold mb-1 text-sm",children:["Cliente: ",e.nombre_cliente," ",e.apellido_cliente,"    "]})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Producto:"})," ",e.nombre_producto," "]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Cantidad:"})," ",e.cantidad_producto]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha creaci\xf3n de orden de producci\xf3n:"})," ",e.fecha_creacion_orden_produccion&&new Date(e.fecha_creacion_orden_produccion).getTime()>0?new Date(e.fecha_creacion_orden_produccion).toLocaleDateString():"-"]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha fin de orden de producci\xf3n:"})," ",e.fecha_fin_orden_produccion&&new Date(e.fecha_fin_orden_produccion).getTime()>0?new Date(e.fecha_fin_orden_produccion).toLocaleDateString():"-"]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Fecha entrega del pedido:"})," ",e.fecha_entrega_solicitada_orden_venta&&new Date(e.fecha_entrega_solicitada_orden_venta).getTime()>0?new Date(e.fecha_entrega_solicitada_orden_venta).toLocaleDateString():"-"]}),(0,a.jsx)("div",{className:"flex gap-2 mt-2",children:(0,a.jsx)("button",{className:"flex-1 bg-success text-white rounded px-2 py-1 text-xs",onClick:()=>u(l===e.id_orden_produccion?null:e.id_orden_produccion),children:l===e.id_orden_produccion?"Ocultar materia prima":"Ver materia prima"})}),e.materias_primas_requeridas.length>0&&l===e.id_orden_produccion&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Materias primas utilizadas:"}),(0,a.jsx)("ul",{className:"list-disc list-inside text-sm mt-1",children:e.materias_primas_requeridas.map(e=>(0,a.jsxs)("li",{children:[e.nombre_materia_prima," - ",e.cantidad_materia_prima," ",e.unidad_medida_materia_prima," (Lote: ",e.codigo_lote,")"]},e.id_lote_materia_prima))})]})]},e.id_orden_produccion))})]})}},51730:(e,t,r)=>{r.d(t,{default:()=>d});var a=r(95155);r(12115);var o=r(20063),n=r(84926),i=r(15239);let d=()=>{let e=(0,o.useRouter)();return(0,a.jsxs)("header",{className:"relative flex items-center justify-center py-3 text-center text-white",children:[(0,a.jsx)(i.default,{src:"/Banner.jpg",alt:"Banner",fill:!0,priority:!0,className:"object-cover "}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"CORE."}),(0,a.jsx)("h4",{children:"El N\xfacleo de tu Empresa"})]}),(0,a.jsxs)("button",{onClick:()=>{e.push("/")},className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white text-primary rounded-md hover:bg-gray-200 transition","aria-label":"Cerrar sesi\xf3n",children:[(0,a.jsx)(n.A,{size:16}),(0,a.jsx)("span",{})]})]})}},54652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return s},getImageProps:function(){return d}});let a=r(28140),o=r(75040),n=r(81356),i=a._(r(71124));function d(e){let{props:t}=(0,o.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let s=n.Image},58213:(e,t,r)=>{r.d(t,{Bs:()=>o,EF:()=>s,K5:()=>n,Z0:()=>d,Z7:()=>i});let a="https://eldzogehdj.execute-api.us-east-1.amazonaws.com/prd";async function o(){let e=await fetch("".concat(a,"/orden-produccion/orden-produccion-listaprd-enproceso-finalizada"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Error fetching productos");let t=await e.json();return Array.isArray(t.ordenes_produccion)?t.ordenes_produccion:[]}async function n(e,t){if(console.log("actualizar ot "+e+" a estado: "+t),!(await fetch("".concat(a,"/orden-produccion/update-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_orden_produccion:e,estado:t})})).ok)throw Error("Error updating orden de produccion")}async function i(e){console.log("fetch ordenes de produccion en estado: "+e);let t=await fetch("".concat(a,"/orden-produccion/listar-orden-produccion-por-estado"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado_orden_produccion:e})});if(!t.ok)throw Error("Error fetching productos");return(await t.json()).ordenes_produccion}async function d(e){let t={id_orden_produccion:e},r=await fetch("".concat(a,"/orden-produccion/post-get-orden-produccion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Error fetching orden de produccion details");let o=await r.json();return console.log("Detalles de la orden de produccion:",t),o.orden_produccion}async function s(e,t){let r={id_orden_venta:e,nueva_fecha_solicitada:t};console.log(JSON.stringify(r));let o=await fetch("".concat(a,"/crear-orden-venta/post-cambiar-fecha-solicitada"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok)throw Error("Error updating fecha de entrega");return await o.json()}},71847:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(12115);let o=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:s,className:c="",children:l,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...i,width:o,height:o,stroke:r,strokeWidth:s?24*Number(d)/Number(o):d,className:n("lucide",c),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(l)?l:[l]])}),s=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:s,...c}=r;return(0,a.createElement)(d,{ref:i,iconNode:t,className:n("lucide-".concat(o(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),s),...c})});return r.displayName=o(e),r}},84926:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])}}]);